(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const mr=!1;var ze=Array.isArray,dn=Array.prototype.indexOf,Ft=Array.from,Nt=Object.defineProperty,Me=Object.getOwnPropertyDescriptor,gr=Object.getOwnPropertyDescriptors,_n=Object.prototype,pn=Array.prototype,qt=Object.getPrototypeOf,rr=Object.isExtensible;function hn(e){return e()}function ot(e){for(var t=0;t<e.length;t++)e[t]()}function mn(){var e,t,r=new Promise((n,a)=>{e=n,t=a});return{promise:r,resolve:e,reject:t}}const ne=2,jt=4,mt=8,Be=16,ge=32,Pe=64,br=128,se=256,ut=512,J=1024,le=2048,ke=4096,fe=8192,Ce=16384,Vt=32768,Bt=65536,nr=1<<17,gn=1<<18,et=1<<19,yr=1<<20,Dt=1<<21,Ht=1<<22,Oe=1<<23,we=Symbol("$state"),bn=Symbol("legacy props"),yn=Symbol(""),Yt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function wn(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function wr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function En(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Sn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function On(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function An(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Tn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Cn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const gt=1,bt=2,Er=4,In=8,Nn=16,Dn=2,$n=4,Rn=8,Ln=1,Mn=2,K=Symbol(),Un="http://www.w3.org/1999/xhtml";function Fn(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let qn=!1;function Sr(e){return e===this.v}function jn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function kr(e){return!jn(e,this.v)}let He=!1,Vn=!1;function Bn(){He=!0}let j=null;function ft(e){j=e}function tt(e,t=!1,r){j={p:j,c:null,e:null,s:e,x:null,l:He&&!t?{s:null,u:null,$:[]}:null}}function rt(e){var t=j,r=t.e;if(r!==null){t.e=null;for(var n of r)jr(n)}return j=t.p,{}}function nt(){return!He||j!==null&&j.l===null}const Hn=new WeakMap;function Yn(e){var t=N;if(t===null)return $.f|=Oe,e;if((t.f&Vt)===0){if((t.f&br)===0)throw!t.parent&&e instanceof Error&&xr(e),e;t.b.error(e)}else Wt(e,t)}function Wt(e,t){for(;t!==null;){if((t.f&br)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&xr(e),e}function xr(e){const t=Hn.get(e);t&&(Nt(e,"message",{value:t.message}),Nt(e,"stack",{value:t.stack}))}let Je=[],$t=[];function Or(){var e=Je;Je=[],ot(e)}function Wn(){var e=$t;$t=[],ot(e)}function Ar(e){Je.length===0&&queueMicrotask(Or),Je.push(e)}function Kn(){Je.length>0&&Or(),$t.length>0&&Wn()}function Gn(){for(var e=N.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&wn(),e}function Kt(e){var t=ne|le,r=$!==null&&($.f&ne)!==0?$:null;return N===null||r!==null&&(r.f&se)!==0?t|=se:N.f|=et,{ctx:j,deps:null,effects:null,equals:Sr,f:t,fn:e,reactions:null,rv:0,v:K,wv:0,parent:r??N,ac:null}}function Jn(e,t){let r=N;r===null&&En();var n=r.b,a=void 0,i=Qe(K),s=null,l=!$;return ua(()=>{try{var f=e();s&&Promise.resolve(f).catch(()=>{})}catch(d){f=Promise.reject(d)}var o=()=>f;a=s?.then(o,o)??Promise.resolve(f),s=a;var c=F,_=n.pending;l&&(n.update_pending_count(1),_||c.increment());const h=(d,v=void 0)=>{s=null,_||c.activate(),v?v!==Yt&&(i.f|=Oe,Ve(i,v)):((i.f&Oe)!==0&&(i.f^=Oe),Ve(i,d)),l&&(n.update_pending_count(-1),_||c.decrement()),Cr()};if(a.then(h,d=>h(null,d||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(f=>{function o(c){function _(){c===a?f(i):o(a)}c.then(_,_)}o(a)})}function yt(e){const t=Kt(e);return t.equals=kr,t}function Tr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)me(t[r])}}function Qn(e){for(var t=e.parent;t!==null;){if((t.f&ne)===0)return t;t=t.parent}return null}function Gt(e){var t,r=N;Se(Qn(e));try{Tr(e),t=Xr(e)}finally{Se(r)}return t}function Pr(e){var t=Gt(e);if(e.equals(t)||(e.v=t,e.wv=Jr()),!Ie){var r=(ye||(e.f&se)!==0)&&e.deps!==null?ke:J;Z(e,r)}}function Xn(e,t,r){const n=nt()?Kt:yt;if(t.length===0){r(e.map(n));return}var a=F,i=N,s=Zn(),l=Gn();Promise.all(t.map(f=>Jn(f))).then(f=>{a?.activate(),s();try{r([...e.map(n),...f])}catch(o){(i.f&Ce)===0&&Wt(o,i)}a?.deactivate(),Cr()}).catch(f=>{l.error(f)})}function Zn(){var e=N,t=$,r=j,n=F;return function(){Se(e),_e(t),ft(r),n?.activate()}}function Cr(){Se(null),_e(null),ft(null)}const At=new Set;let F=null,it=null,ar=new Set,ct=[];function Ir(){const e=ct.shift();ct.length>0&&queueMicrotask(Ir),e()}let Te=[],wt=null,Rt=!1,st=!1;class qe{current=new Map;#o=new Map;#a=new Set;#e=0;#u=null;#f=!1;#r=[];#i=[];#n=[];#t=[];#s=[];#c=[];#v=[];skipped_effects=new Set;process(t){Te=[],it=null;for(const a of t)this.#_(a);if(this.#r.length===0&&this.#e===0){this.#d();var r=this.#n,n=this.#t;this.#n=[],this.#t=[],this.#s=[],it=F,F=null,ir(r),ir(n),F===null?F=this:At.delete(this),this.#u?.resolve()}else this.#l(this.#n),this.#l(this.#t),this.#l(this.#s);for(const a of this.#r)Fe(a);for(const a of this.#i)Fe(a);this.#r=[],this.#i=[]}#_(t){t.f^=J;for(var r=t.first;r!==null;){var n=r.f,a=(n&(ge|Pe))!==0,i=a&&(n&J)!==0,s=i||(n&fe)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){if(a)r.f^=J;else if((n&jt)!==0)this.#t.push(r);else if((n&J)===0)if((n&Ht)!==0){var l=r.b?.pending?this.#i:this.#r;l.push(r)}else kt(r)&&((r.f&Be)!==0&&this.#s.push(r),Fe(r));var f=r.first;if(f!==null){r=f;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)r=o.next,o=o.parent}}#l(t){for(const r of t)((r.f&le)!==0?this.#c:this.#v).push(r),Z(r,J);t.length=0}capture(t,r){this.#o.has(t)||this.#o.set(t,r),this.current.set(t,t.v)}activate(){F=this}deactivate(){F=null,it=null;for(const t of ar)if(ar.delete(t),t(),F!==null)break}neuter(){this.#f=!0}flush(){Te.length>0?Nr():this.#d(),F===this&&(this.#e===0&&At.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#a)t();this.#a.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)Z(t,le),je(t);for(const t of this.#v)Z(t,ke),je(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#a.add(t)}settled(){return(this.#u??=mn()).promise}static ensure(){if(F===null){const t=F=new qe;At.add(F),st||qe.enqueue(()=>{F===t&&t.flush()})}return F}static enqueue(t){ct.length===0&&queueMicrotask(Ir),ct.unshift(t)}}function zn(e){var t=st;st=!0;try{for(var r;;){if(Kn(),Te.length===0&&(F?.flush(),Te.length===0))return wt=null,r;Nr()}}finally{st=t}}function Nr(){var e=Ue;Rt=!0;try{var t=0;for(fr(!0);Te.length>0;){var r=qe.ensure();if(t++>1e3){var n,a;ea()}r.process(Te),Ee.clear()}}finally{Rt=!1,fr(e),wt=null}}function ea(){try{On()}catch(e){Wt(e,wt)}}let xe=null;function ir(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ce|fe))===0&&kt(n)&&(xe=[],Fe(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Yr(n):n.fn=null),xe?.length>0)){Ee.clear();for(const a of xe)Fe(a);xe=[]}}xe=null}}function je(e){for(var t=wt=e;t.parent!==null;){t=t.parent;var r=t.f;if(Rt&&t===N&&(r&Be)!==0)return;if((r&(Pe|ge))!==0){if((r&J)===0)return;t.f^=J}}Te.push(t)}const Ee=new Map;function Qe(e,t){var r={f:0,v:e,reactions:null,equals:Sr,rv:0,wv:0};return r}function be(e,t){const r=Qe(e);return pa(r),r}function H(e,t=!1,r=!0){const n=Qe(e);return t||(n.equals=kr),He&&r&&j!==null&&j.l!==null&&(j.l.s??=[]).push(n),n}function Lt(e,t){return p(e,G(()=>u(e))),t}function p(e,t,r=!1){$!==null&&(!de||($.f&nr)!==0)&&nt()&&($.f&(ne|Be|Ht|nr))!==0&&!he?.includes(e)&&Cn();let n=r?Le(t):t;return Ve(e,n)}function Ve(e,t){if(!e.equals(t)){var r=e.v;Ie?Ee.set(e,t):Ee.set(e,r),e.v=t;var n=qe.ensure();n.capture(e,r),(e.f&ne)!==0&&((e.f&le)!==0&&Gt(e),Z(e,(e.f&se)===0?J:ke)),e.wv=Jr(),Dr(e,le),nt()&&N!==null&&(N.f&J)!==0&&(N.f&(ge|Pe))===0&&(ae===null?ha([e]):ae.push(e))}return t}function Tt(e){p(e,e.v+1)}function Dr(e,t){var r=e.reactions;if(r!==null)for(var n=nt(),a=r.length,i=0;i<a;i++){var s=r[i],l=s.f;if(!(!n&&s===N)){var f=(l&le)===0;f&&Z(s,t),(l&ne)!==0?Dr(s,ke):f&&((l&Be)!==0&&xe!==null&&xe.push(s),je(s))}}}function Le(e){if(typeof e!="object"||e===null||we in e)return e;const t=qt(e);if(t!==_n&&t!==pn)return e;var r=new Map,n=ze(e),a=be(0),i=Ae,s=l=>{if(Ae===i)return l();var f=$,o=Ae;_e(null),vr(i);var c=l();return _e(f),vr(o),c};return n&&r.set("length",be(e.length)),new Proxy(e,{defineProperty(l,f,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Tn();var c=r.get(f);return c===void 0?c=s(()=>{var _=be(o.value);return r.set(f,_),_}):p(c,o.value,!0),!0},deleteProperty(l,f){var o=r.get(f);if(o===void 0){if(f in l){const c=s(()=>be(K));r.set(f,c),Tt(a)}}else p(o,K),Tt(a);return!0},get(l,f,o){if(f===we)return e;var c=r.get(f),_=f in l;if(c===void 0&&(!_||Me(l,f)?.writable)&&(c=s(()=>{var d=Le(_?l[f]:K),v=be(d);return v}),r.set(f,c)),c!==void 0){var h=u(c);return h===K?void 0:h}return Reflect.get(l,f,o)},getOwnPropertyDescriptor(l,f){var o=Reflect.getOwnPropertyDescriptor(l,f);if(o&&"value"in o){var c=r.get(f);c&&(o.value=u(c))}else if(o===void 0){var _=r.get(f),h=_?.v;if(_!==void 0&&h!==K)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return o},has(l,f){if(f===we)return!0;var o=r.get(f),c=o!==void 0&&o.v!==K||Reflect.has(l,f);if(o!==void 0||N!==null&&(!c||Me(l,f)?.writable)){o===void 0&&(o=s(()=>{var h=c?Le(l[f]):K,d=be(h);return d}),r.set(f,o));var _=u(o);if(_===K)return!1}return c},set(l,f,o,c){var _=r.get(f),h=f in l;if(n&&f==="length")for(var d=o;d<_.v;d+=1){var v=r.get(d+"");v!==void 0?p(v,K):d in l&&(v=s(()=>be(K)),r.set(d+"",v))}if(_===void 0)(!h||Me(l,f)?.writable)&&(_=s(()=>be(void 0)),p(_,Le(o)),r.set(f,_));else{h=_.v!==K;var w=s(()=>Le(o));p(_,w)}var b=Reflect.getOwnPropertyDescriptor(l,f);if(b?.set&&b.set.call(c,o),!h){if(n&&typeof f=="string"){var I=r.get("length"),m=Number(f);Number.isInteger(m)&&m>=I.v&&p(I,m+1)}Tt(a)}return!0},ownKeys(l){u(a);var f=Reflect.ownKeys(l).filter(_=>{var h=r.get(_);return h===void 0||h.v!==K});for(var[o,c]of r)c.v!==K&&!(o in l)&&f.push(o);return f},setPrototypeOf(){Pn()}})}function sr(e){try{if(e!==null&&typeof e=="object"&&we in e)return e[we]}catch{}return e}function ta(e,t){return Object.is(sr(e),sr(t))}var lr,$r,Rr,Lr;function ra(){if(lr===void 0){lr=window,$r=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Rr=Me(t,"firstChild").get,Lr=Me(t,"nextSibling").get,rr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),rr(r)&&(r.__t=void 0)}}function Ye(e=""){return document.createTextNode(e)}function vt(e){return Rr.call(e)}function Et(e){return Lr.call(e)}function P(e,t){return vt(e)}function or(e,t){{var r=vt(e);return r instanceof Comment&&r.data===""?Et(r):r}}function A(e,t=1,r=!1){let n=e;for(;t--;)n=Et(n);return n}function na(e){e.textContent=""}function Mr(){return!1}let ur=!1;function aa(){ur||(ur=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function St(e){var t=$,r=N;_e(null),Se(null);try{return e()}finally{_e(t),Se(r)}}function Ur(e,t,r,n=r){e.addEventListener(t,()=>St(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),aa()}function Fr(e){N===null&&$===null&&xn(),$!==null&&($.f&se)!==0&&N===null&&kn(),Ie&&Sn()}function ia(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function pe(e,t,r,n=!0){var a=N;a!==null&&(a.f&fe)!==0&&(e|=fe);var i={ctx:j,deps:null,nodes_start:null,nodes_end:null,f:e|le,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Fe(i),i.f|=Vt}catch(f){throw me(i),f}else t!==null&&je(i);if(n){var s=i;if(r&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&et)===0&&(s=s.first),s!==null&&(s.parent=a,a!==null&&ia(s,a),$!==null&&($.f&ne)!==0&&(e&Pe)===0)){var l=$;(l.effects??=[]).push(s)}}return i}function qr(e){const t=pe(mt,null,!1);return Z(t,J),t.teardown=e,t}function Mt(e){Fr();var t=N.f,r=!$&&(t&ge)!==0&&(t&Vt)===0;if(r){var n=j;(n.e??=[]).push(e)}else return jr(e)}function jr(e){return pe(jt|yr,e,!1)}function sa(e){return Fr(),pe(mt|yr,e,!0)}function la(e){qe.ensure();const t=pe(Pe|et,e,!0);return(r={})=>new Promise(n=>{r.outro?Jt(t,()=>{me(t),n(void 0)}):(me(t),n(void 0))})}function oa(e){return pe(jt,e,!1)}function ua(e){return pe(Ht|et,e,!0)}function fa(e,t=0){return pe(mt|t,e,!0)}function ie(e,t=[],r=[]){Xn(t,r,n=>{pe(mt,()=>e(...n.map(u)),!0)})}function Vr(e,t=0){var r=pe(Be|t,e,!0);return r}function Xe(e,t=!0){return pe(ge|et,e,!0,t)}function Br(e){var t=e.teardown;if(t!==null){const r=Ie,n=$;cr(!0),_e(null);try{t.call(null)}finally{cr(r),_e(n)}}}function Hr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const a=r.ac;a!==null&&St(()=>{a.abort(Yt)});var n=r.next;(r.f&Pe)!==0?r.parent=null:me(r,t),r=n}}function ca(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&ge)===0&&me(t),t=r}}function me(e,t=!0){var r=!1;(t||(e.f&gn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(va(e.nodes_start,e.nodes_end),r=!0),Hr(e,t&&!r),dt(e,0),Z(e,Ce);var n=e.transitions;if(n!==null)for(const i of n)i.stop();Br(e);var a=e.parent;a!==null&&a.first!==null&&Yr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function va(e,t){for(;e!==null;){var r=e===t?null:Et(e);e.remove(),e=r}}function Yr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Jt(e,t){var r=[];Qt(e,r,!0),Wr(r,()=>{me(e),t&&t()})}function Wr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var a of e)a.out(n)}else t()}function Qt(e,t,r){if((e.f&fe)===0){if(e.f^=fe,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var a=n.next,i=(n.f&Bt)!==0||(n.f&ge)!==0;Qt(n,t,i?r:!1),n=a}}}function Xt(e){Kr(e,!0)}function Kr(e,t){if((e.f&fe)!==0){e.f^=fe,(e.f&J)===0&&(Z(e,le),je(e));for(var r=e.first;r!==null;){var n=r.next,a=(r.f&Bt)!==0||(r.f&ge)!==0;Kr(r,a?t:!1),r=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let Re=null;function da(e){var t=Re;try{if(Re=new Set,G(e),t!==null)for(var r of Re)t.add(r);return Re}finally{Re=t}}function _a(e){for(var t of da(e))Ve(t,t.v)}let Ue=!1;function fr(e){Ue=e}let Ie=!1;function cr(e){Ie=e}let $=null,de=!1;function _e(e){$=e}let N=null;function Se(e){N=e}let he=null;function pa(e){$!==null&&(he===null?he=[e]:he.push(e))}let Q=null,te=0,ae=null;function ha(e){ae=e}let Gr=1,Ze=0,Ae=Ze;function vr(e){Ae=e}let ye=!1;function Jr(){return++Gr}function kt(e){var t=e.f;if((t&le)!==0)return!0;if((t&ke)!==0){var r=e.deps,n=(t&se)!==0;if(r!==null){var a,i,s=(t&ut)!==0,l=n&&N!==null&&!ye,f=r.length;if((s||l)&&(N===null||(N.f&Ce)===0)){var o=e,c=o.parent;for(a=0;a<f;a++)i=r[a],(s||!i?.reactions?.includes(o))&&(i.reactions??=[]).push(o);s&&(o.f^=ut),l&&c!==null&&(c.f&se)===0&&(o.f^=se)}for(a=0;a<f;a++)if(i=r[a],kt(i)&&Pr(i),i.wv>e.wv)return!0}(!n||N!==null&&!ye)&&Z(e,J)}return!1}function Qr(e,t,r=!0){var n=e.reactions;if(n!==null&&!he?.includes(e))for(var a=0;a<n.length;a++){var i=n[a];(i.f&ne)!==0?Qr(i,t,!1):t===i&&(r?Z(i,le):(i.f&J)!==0&&Z(i,ke),je(i))}}function Xr(e){var t=Q,r=te,n=ae,a=$,i=ye,s=he,l=j,f=de,o=Ae,c=e.f;Q=null,te=0,ae=null,ye=(c&se)!==0&&(de||!Ue||$===null),$=(c&(ge|Pe))===0?e:null,he=null,ft(e.ctx),de=!1,Ae=++Ze,e.ac!==null&&(St(()=>{e.ac.abort(Yt)}),e.ac=null);try{e.f|=Dt;var _=e.fn,h=_(),d=e.deps;if(Q!==null){var v;if(dt(e,te),d!==null&&te>0)for(d.length=te+Q.length,v=0;v<Q.length;v++)d[te+v]=Q[v];else e.deps=d=Q;if(!ye||(c&ne)!==0&&e.reactions!==null)for(v=te;v<d.length;v++)(d[v].reactions??=[]).push(e)}else d!==null&&te<d.length&&(dt(e,te),d.length=te);if(nt()&&ae!==null&&!de&&d!==null&&(e.f&(ne|ke|le))===0)for(v=0;v<ae.length;v++)Qr(ae[v],e);return a!==null&&a!==e&&(Ze++,ae!==null&&(n===null?n=ae:n.push(...ae))),(e.f&Oe)!==0&&(e.f^=Oe),h}catch(w){return Yn(w)}finally{e.f^=Dt,Q=t,te=r,ae=n,$=a,ye=i,he=s,ft(l),de=f,Ae=o}}function ma(e,t){let r=t.reactions;if(r!==null){var n=dn.call(r,e);if(n!==-1){var a=r.length-1;a===0?r=t.reactions=null:(r[n]=r[a],r.pop())}}r===null&&(t.f&ne)!==0&&(Q===null||!Q.includes(t))&&(Z(t,ke),(t.f&(se|ut))===0&&(t.f^=ut),Tr(t),dt(t,0))}function dt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ma(e,r[n])}function Fe(e){var t=e.f;if((t&Ce)===0){Z(e,J);var r=N,n=Ue;N=e,Ue=!0;try{(t&Be)!==0?ca(e):Hr(e),Br(e);var a=Xr(e);e.teardown=typeof a=="function"?a:null,e.wv=Gr;var i;mr&&Vn&&(e.f&le)!==0&&e.deps}finally{Ue=n,N=r}}}async function ga(){await Promise.resolve(),zn()}function u(e){var t=e.f,r=(t&ne)!==0;if(Re?.add(e),$!==null&&!de){var n=N!==null&&(N.f&Ce)!==0;if(!n&&!he?.includes(e)){var a=$.deps;if(($.f&Dt)!==0)e.rv<Ze&&(e.rv=Ze,Q===null&&a!==null&&a[te]===e?te++:Q===null?Q=[e]:(!ye||!Q.includes(e))&&Q.push(e));else{($.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[$]:i.includes($)||i.push($)}}}else if(r&&e.deps===null&&e.effects===null){var s=e,l=s.parent;l!==null&&(l.f&se)===0&&(s.f^=se)}if(Ie){if(Ee.has(e))return Ee.get(e);if(r){s=e;var f=s.v;return((s.f&J)===0&&s.reactions!==null||Zr(s))&&(f=Gt(s)),Ee.set(s,f),f}}else r&&(s=e,kt(s)&&Pr(s));if((e.f&Oe)!==0)throw e.v;return e.v}function Zr(e){if(e.v===K)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ee.has(t)||(t.f&ne)!==0&&Zr(t))return!0;return!1}function G(e){var t=de;try{return de=!0,e()}finally{de=t}}const ba=-7169;function Z(e,t){e.f=e.f&ba|t}function zr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(we in e)Ut(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&we in r&&Ut(r)}}}function Ut(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Ut(e[n],t)}catch{}const r=qt(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=gr(r);for(let a in n){const i=n[a].get;if(i)try{i.call(e)}catch{}}}}}const ya=["touchstart","touchmove"];function wa(e){return ya.includes(e)}const Ea=new Set,dr=new Set;function Sa(e,t,r,n={}){function a(i){if(n.capture||We.call(t,i),!i.cancelBubble)return St(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ar(()=>{t.addEventListener(e,a,n)}):t.addEventListener(e,a,n),a}function X(e,t,r,n,a){var i={capture:n,passive:a},s=Sa(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&qr(()=>{t.removeEventListener(e,s,i)})}let _r=null;function We(e){var t=this,r=t.ownerDocument,n=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;_r=e;var s=0,l=_r===e&&e.__root;if(l){var f=a.indexOf(l);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var o=a.indexOf(t);if(o===-1)return;f<=o&&(s=f)}if(i=a[s]||e.target,i!==t){Nt(e,"currentTarget",{configurable:!0,get(){return i||r}});var c=$,_=N;_e(null),Se(null);try{for(var h,d=[];i!==null;){var v=i.assignedSlot||i.parentNode||i.host||null;try{var w=i["__"+n];if(w!=null&&(!i.disabled||e.target===i))if(ze(w)){var[b,...I]=w;b.apply(i,[e,...I])}else w.call(i,e)}catch(m){h?d.push(m):h=m}if(e.cancelBubble||v===t||v===null)break;i=v}if(h){for(let m of d)queueMicrotask(()=>{throw m});throw h}}finally{e.__root=t,delete e.currentTarget,_e(c),Se(_)}}}function ka(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function _t(e,t){var r=N;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function V(e,t){var r=(t&Ln)!==0,n=(t&Mn)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=ka(i?e:"<!>"+e),r||(a=vt(a)));var s=n||$r?document.importNode(a,!0):a.cloneNode(!0);if(r){var l=vt(s),f=s.lastChild;_t(l,f)}else _t(s,s);return s}}function xa(e=""){{var t=Ye(e+"");return _t(t,t),t}}function Oa(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ye();return e.append(t,r),_t(t,r),e}function q(e,t){e!==null&&e.before(t)}function ue(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Aa(e,t){return Ta(e,t)}const $e=new Map;function Ta(e,{target:t,anchor:r,props:n={},events:a,context:i,intro:s=!0}){ra();var l=new Set,f=_=>{for(var h=0;h<_.length;h++){var d=_[h];if(!l.has(d)){l.add(d);var v=wa(d);t.addEventListener(d,We,{passive:v});var w=$e.get(d);w===void 0?(document.addEventListener(d,We,{passive:v}),$e.set(d,1)):$e.set(d,w+1)}}};f(Ft(Ea)),dr.add(f);var o=void 0,c=la(()=>{var _=r??t.appendChild(Ye());return Xe(()=>{if(i){tt({});var h=j;h.c=i}a&&(n.$$events=a),o=e(_,n)||{},i&&rt()}),()=>{for(var h of l){t.removeEventListener(h,We);var d=$e.get(h);--d===0?(document.removeEventListener(h,We),$e.delete(h)):$e.set(h,d)}dr.delete(f),_!==r&&_.parentNode?.removeChild(_)}});return Pa.set(o,c),o}let Pa=new WeakMap;function re(e,t,r=!1){var n=e,a=null,i=null,s=K,l=r?Bt:0,f=!1;const o=(d,v=!0)=>{f=!0,h(v,d)};var c=null;function _(){c!==null&&(c.lastChild.remove(),n.before(c),c=null);var d=s?a:i,v=s?i:a;d&&Xt(d),v&&Jt(v,()=>{s?i=null:a=null})}const h=(d,v)=>{if(s!==(s=d)){var w=Mr(),b=n;if(w&&(c=document.createDocumentFragment(),c.append(b=Ye())),s?a??=v&&Xe(()=>v(b)):i??=v&&Xe(()=>v(b)),w){var I=F,m=s?a:i,E=s?i:a;m&&I.skipped_effects.delete(m),E&&I.skipped_effects.add(E),I.add_callback(_)}else _()}};Vr(()=>{f=!1,t(o),f||h(null,null)},l)}function pt(e,t){return t}function Ca(e,t,r){for(var n=e.items,a=[],i=t.length,s=0;s<i;s++)Qt(t[s].e,a,!0);var l=i>0&&a.length===0&&r!==null;if(l){var f=r.parentNode;na(f),f.append(r),n.clear(),ve(e,t[0].prev,t[i-1].next)}Wr(a,()=>{for(var o=0;o<i;o++){var c=t[o];l||(n.delete(c.k),ve(e,c.prev,c.next)),me(c.e,!l)}})}function ht(e,t,r,n,a,i=null){var s=e,l={flags:t,items:new Map,first:null},f=(t&Er)!==0;if(f){var o=e;s=o.appendChild(Ye())}var c=null,_=!1,h=new Map,d=yt(()=>{var I=r();return ze(I)?I:I==null?[]:Ft(I)}),v,w;function b(){Ia(w,v,l,h,s,a,t,n,r),i!==null&&(v.length===0?c?Xt(c):c=Xe(()=>i(s)):c!==null&&Jt(c,()=>{c=null}))}Vr(()=>{w??=N,v=u(d);var I=v.length;if(!(_&&I===0)){_=I===0;var m,E,R,M;if(Mr()){var T=new Set,D=F;for(E=0;E<I;E+=1){R=v[E],M=n(R,E);var Y=l.items.get(M)??h.get(M);Y?(t&(gt|bt))!==0&&en(Y,R,E,t):(m=tn(null,l,null,null,R,M,E,a,t,r,!0),h.set(M,m)),T.add(M)}for(const[z,O]of l.items)T.has(z)||D.skipped_effects.add(O.e);D.add_callback(b)}else b();u(d)}})}function Ia(e,t,r,n,a,i,s,l,f){var o=(s&In)!==0,c=(s&(gt|bt))!==0,_=t.length,h=r.items,d=r.first,v=d,w,b=null,I,m=[],E=[],R,M,T,D;if(o)for(D=0;D<_;D+=1)R=t[D],M=l(R,D),T=h.get(M),T!==void 0&&(T.a?.measure(),(I??=new Set).add(T));for(D=0;D<_;D+=1){if(R=t[D],M=l(R,D),T=h.get(M),T===void 0){var Y=n.get(M);if(Y!==void 0){n.delete(M),h.set(M,Y);var z=b?b.next:v;ve(r,b,Y),ve(r,Y,z),Pt(Y,z,a),b=Y}else{var O=v?v.e.nodes_start:a;b=tn(O,r,b,b===null?r.first:b.next,R,M,D,i,s,f)}h.set(M,b),m=[],E=[],v=b.next;continue}if(c&&en(T,R,D,s),(T.e.f&fe)!==0&&(Xt(T.e),o&&(T.a?.unfix(),(I??=new Set).delete(T))),T!==v){if(w!==void 0&&w.has(T)){if(m.length<E.length){var y=E[0],C;b=y.prev;var k=m[0],x=m[m.length-1];for(C=0;C<m.length;C+=1)Pt(m[C],y,a);for(C=0;C<E.length;C+=1)w.delete(E[C]);ve(r,k.prev,x.next),ve(r,b,k),ve(r,x,y),v=y,b=x,D-=1,m=[],E=[]}else w.delete(T),Pt(T,v,a),ve(r,T.prev,T.next),ve(r,T,b===null?r.first:b.next),ve(r,b,T),b=T;continue}for(m=[],E=[];v!==null&&v.k!==M;)(v.e.f&fe)===0&&(w??=new Set).add(v),E.push(v),v=v.next;if(v===null)continue;T=v}m.push(T),b=T,v=T.next}if(v!==null||w!==void 0){for(var g=w===void 0?[]:Ft(w);v!==null;)(v.e.f&fe)===0&&g.push(v),v=v.next;var S=g.length;if(S>0){var L=(s&Er)!==0&&_===0?a:null;if(o){for(D=0;D<S;D+=1)g[D].a?.measure();for(D=0;D<S;D+=1)g[D].a?.fix()}Ca(r,g,L)}}o&&Ar(()=>{if(I!==void 0)for(T of I)T.a?.apply()}),e.first=r.first&&r.first.e,e.last=b&&b.e;for(var W of n.values())me(W.e);n.clear()}function en(e,t,r,n){(n&gt)!==0&&Ve(e.v,t),(n&bt)!==0?Ve(e.i,r):e.i=r}function tn(e,t,r,n,a,i,s,l,f,o,c){var _=(f&gt)!==0,h=(f&Nn)===0,d=_?h?H(a,!1,!1):Qe(a):a,v=(f&bt)===0?s:Qe(s),w={i:v,v:d,k:i,a:null,e:null,prev:r,next:n};try{if(e===null){var b=document.createDocumentFragment();b.append(e=Ye())}return w.e=Xe(()=>l(e,d,v,o),qn),w.e.prev=r&&r.e,w.e.next=n&&n.e,r===null?c||(t.first=w):(r.next=w,r.e.next=w.e),n!==null&&(n.prev=w,n.e.prev=w.e),w}finally{}}function Pt(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==n;){var s=Et(i);a.before(i),i=s}}function ve(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Na(e,t,r){var n=e==null?"":""+e;return n===""?null:n}function rn(e,t,r,n,a,i){var s=e.__className;if(s!==r||s===void 0){var l=Na(r);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}return i}function nn(e,t,r=!1){if(e.multiple){if(t==null)return;if(!ze(t))return Fn();for(var n of e.options)n.selected=t.includes(Ke(n));return}for(n of e.options){var a=Ke(n);if(ta(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Da(e){var t=new MutationObserver(()=>{nn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qr(()=>{t.disconnect()})}function $a(e,t,r=t){var n=!0;Ur(e,"change",a=>{var i=a?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(i),Ke);else{var l=e.querySelector(i)??e.querySelector("option:not([disabled])");s=l&&Ke(l)}r(s)}),oa(()=>{var a=t();if(nn(e,a,n),n&&a===void 0){var i=e.querySelector(":checked");i!==null&&(a=Ke(i),r(a))}e.__value=a,n=!1}),Da(e)}function Ke(e){return"__value"in e?e.__value:e.value}const Ra=Symbol("is custom element"),La=Symbol("is html");function Ma(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function lt(e,t,r,n){var a=Ua(e);a[t]!==(a[t]=r)&&(t==="loading"&&(e[yn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Fa(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ua(e){return e.__attributes??={[Ra]:e.nodeName.includes("-"),[La]:e.namespaceURI===Un}}var pr=new Map;function Fa(e){var t=e.getAttribute("is")||e.nodeName,r=pr.get(t);if(r)return r;pr.set(t,r=[]);for(var n,a=e,i=Element.prototype;i!==a;){n=gr(a);for(var s in n)n[s].set&&r.push(s);a=qt(a)}return r}function Ge(e,t,r=t){var n=new WeakSet;Ur(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Ct(e)?It(i):i,r(i),F!==null&&n.add(F),await ga(),i!==(i=t())){var s=e.selectionStart,l=e.selectionEnd;e.value=i??"",l!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(l,e.value.length))}}),G(t)==null&&e.value&&(r(Ct(e)?It(e.value):e.value),F!==null&&n.add(F)),fa(()=>{var a=t();if(e===document.activeElement){var i=it??F;if(n.has(i))return}Ct(e)&&a===It(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ct(e){var t=e.type;return t==="number"||t==="range"}function It(e){return e===""?null:+e}function xt(e=!1){const t=j,r=t.l.u;if(!r)return;let n=()=>zr(t.s);if(e){let a=0,i={};const s=Kt(()=>{let l=!1;const f=t.s;for(const o in f)f[o]!==i[o]&&(i[o]=f[o],l=!0);return l&&a++,a});n=()=>u(s)}r.b.length&&sa(()=>{hr(t,n),ot(r.b)}),Mt(()=>{const a=G(()=>r.m.map(hn));return()=>{for(const i of a)typeof i=="function"&&i()}}),r.a.length&&Mt(()=>{hr(t,n),ot(r.a)})}function hr(e,t){if(e.l.s)for(const r of e.l.s)u(r);t()}let at=!1;function qa(e){var t=at;try{return at=!1,[e(),at]}finally{at=t}}function ja(e,t,r,n){var a=!He||(r&Dn)!==0,i=(r&Rn)!==0,s=n,l=!0,f=()=>(l&&(l=!1,s=n),s),o;{var c=we in e||bn in e;o=Me(e,t)?.set??(c&&t in e?m=>e[t]=m:void 0)}var _,h=!1;[_,h]=qa(()=>e[t]),_===void 0&&n!==void 0&&(_=f(),o&&(a&&An(),o(_)));var d;if(a?d=()=>{var m=e[t];return m===void 0?f():(l=!0,m)}:d=()=>{var m=e[t];return m!==void 0&&(s=void 0),m===void 0?s:m},a&&(r&$n)===0)return d;if(o){var v=e.$$legacy;return(function(m,E){return arguments.length>0?((!a||!E||v||h)&&o(E?d():m),m):d()})}var w=!1,b=yt(()=>(w=!1,d()));u(b);var I=N;return(function(m,E){if(arguments.length>0){const R=E?u(b):a&&i?Le(m):m;return p(b,R),w=!0,s!==void 0&&(s=R),m}return Ie&&w||(I.f&Ce)!==0?b.v:u(b)})}function an(e){j===null&&wr(),He&&j.l!==null?Ba(j).m.push(e):Mt(()=>{const t=G(e);if(typeof t=="function")return t})}function Va(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function sn(){const e=j;return e===null&&wr(),(t,r,n)=>{const a=e.s.$$events?.[t];if(a){const i=ze(a)?a.slice():[a],s=Va(t,r,n);for(const l of i)l.call(e.x,s);return!s.defaultPrevented}return!0}}function Ba(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ha="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ha);Bn();var Ya=V('<div class="message svelte-1vkllvj"> </div>'),Wa=V('<section><h2>Create User</h2> <div class="form svelte-1vkllvj"><div><label for="username" class="label">Username</label> <input id="username" class="input" type="text" placeholder="alice"/></div> <div><label for="email" class="label">Email (optional)</label> <input id="email" class="input" type="email" placeholder="alice@example.com"/></div> <div><button class="btn btn-primary">Create user</button></div></div> <!></section>');function Ka(e,t){tt(t,!1);const r=sn(),n="";let a=H(""),i=H(""),s=H("");async function l(){p(s,"");const m={username:u(a),email:u(i)};try{const E=await fetch(`${n}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!E.ok){p(s,`Failed to create user (status ${E.status})`);return}const R=await E.json();localStorage.setItem("userId",R.id),localStorage.setItem("userName",R.username),r("created",R),p(s,`User created: ${R.username} (id ${R.id}). Saved to localStorage.`),p(a,""),p(i,"")}catch(E){p(s,"Error creating user: "+E.message)}}xt();var f=Wa(),o=A(P(f),2),c=P(o),_=A(P(c),2),h=A(c,2),d=A(P(h),2),v=A(h,2),w=P(v),b=A(o,2);{var I=m=>{var E=Ya(),R=P(E);ie(()=>ue(R,u(s))),q(m,E)};re(b,m=>{u(s)&&m(I)})}Ge(_,()=>u(a),m=>p(a,m)),Ge(d,()=>u(i),m=>p(i,m)),X("click",w,l),q(e,f),rt()}var Ga=V('<button class="icon-btn" title="Remove option">×</button>'),Ja=V('<div class="option-item"><input class="input" type="text"/> <!></div>'),Qa=V("<div> </div>"),Xa=V(`<section class="card"><h2>Create New Poll</h2> <div class="form"><div><label class="label">Question *</label> <input class="input" type="text" placeholder="What's your question?"/></div> <div><label class="label">Valid until (optional)</label> <input class="input" type="date"/> <div class="help-text">Leave empty to set 7 days from now automatically.</div></div> <div><label class="label">Options *</label> <div class="form" style="gap:10px;"></div> <div class="mt-12"><button class="btn btn-secondary">+ Add option</button></div></div> <div class="mt-16"><button class="btn btn-primary btn-block"> </button></div> <!></div></section>`);function Za(e,t){tt(t,!1);const r=sn(),n="";let a=H(""),i=H(""),s=H(["",""]),l=H(""),f=H(!1),o=localStorage.getItem("userId");function c(){p(s,[...u(s),""])}function _(k){u(s).length>2&&p(s,u(s).filter((x,g)=>g!==k))}function h(k,x){p(s,u(s).map((g,S)=>S===k?x:g))}async function d(){if(p(l,""),!o){p(l,"You must create a user first (use Create User).");return}if(!u(a).trim()||u(s).filter(x=>x.trim()).length<2){p(l,"Provide a question and at least 2 options.");return}p(f,!0);const k={question:u(a).trim(),publishedAt:new Date().toISOString(),validUntil:u(i)?new Date(u(i)).toISOString():new Date(Date.now()+168*3600*1e3).toISOString(),creator:{id:o},voteOptions:u(s).map(x=>x.trim()).filter(x=>x.length>0).map((x,g)=>({caption:x,presentationOrder:g+1}))};try{const x=await fetch(`${n}/polls`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!x.ok)throw new Error(`Create poll failed: ${x.status}`);const g=await x.json(),S=[];for(const L of k.voteOptions){const W={caption:L.caption,presentationOrder:L.presentationOrder,poll:{id:g.id}},ee=await fetch(`${n}/voteoptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!ee.ok){console.warn("Failed to create voteoption:",W,ee.status);continue}const U=await ee.json();S.push(U)}p(l,`Poll created (id: ${g.id}). ${S.length} option(s) registered.`),p(a,""),p(i,""),p(s,["",""]),r("created",{pollId:g.id,voteOptions:S})}catch(x){console.error(x),p(l,"Error creating poll: "+x.message)}finally{p(f,!1)}}xt();var v=Xa(),w=A(P(v),2),b=P(w),I=A(P(b),2),m=A(b,2),E=A(P(m),2),R=A(m,2),M=A(P(R),2);ht(M,5,()=>u(s),pt,(k,x,g)=>{var S=Ja(),L=P(S);lt(L,"placeholder",`Option ${g+1}`);var W=A(L,2);{var ee=U=>{var oe=Ga();X("click",oe,()=>_(g)),q(U,oe)};re(W,U=>{u(s).length>2&&U(ee)})}Ge(L,()=>u(s)[g],U=>Lt(s,u(s)[g]=U)),X("input",L,U=>h(g,U.target.value)),q(k,S)});var T=A(M,2),D=P(T),Y=A(R,2),z=P(Y),O=P(z),y=A(Y,2);{var C=k=>{var x=Qa(),g=P(x);ie(S=>{rn(x,1,`message ${S??""}`),ue(g,u(l))},[()=>u(l).startsWith("Error")?"message-error":"message-success"]),q(k,x)};re(y,k=>{u(l)&&k(C)})}ie(()=>{z.disabled=u(f),ue(O,u(f)?"Creating...":"Create Poll")}),Ge(I,()=>u(a),k=>p(a,k)),Ge(E,()=>u(i),k=>p(i,k)),X("click",D,c),X("click",z,d),q(e,v),rt()}var za=V('<div class="message">Loading…</div>'),ei=V("<div> </div>"),ti=V('<div class="message">No polls available.</div>'),ri=V('<button class="delete-btn">Delete Poll</button>'),ni=V('<li class="option-item"><div><strong> </strong> <span class="count-badge"> </span></div> <div class="option-actions"><button class="btn btn-primary">Vote</button> <button class="unvote-btn">Unvote</button></div></li>'),ai=V('<ul class="options-list"></ul>'),ii=V('<div class="help-text">No vote options registered for this poll yet.</div>'),si=V('<article class="poll-card"><h3 style="margin: 0 0 6px 0;"> </h3> <!> <div class="meta"> <!></div> <!></article>'),li=V('<section class="card"><h2>Available Polls</h2> <div class="mt-12 mb-12" style="display:flex; gap:10px; align-items:center;"><button class="btn btn-secondary">Refresh</button> <span class="help-text">Tip: Create a user first, then create a poll and vote.</span></div> <!> <!> <!> <div class="polls-grid"></div></section>');function oi(e,t){tt(t,!1);let r=ja(t,"currentUserId",8,"");const n="";let a=H([]),i=[],s=[],l=H(""),f=H(!1),o=H({}),c=H({});an(async()=>{await _()});async function _(){p(f,!0),p(l,"");try{const O=await fetch(`${n}/polls`);p(a,O.ok?await O.json():[]);const y=await fetch(`${n}/voteoptions`);i=y.ok?await y.json():[],p(o,{});for(const k of i){const x=k.poll&&k.poll.id?k.poll.id:null;x&&(u(o)[x]||Lt(o,u(o)[x]=[]),u(o)[x].push(k))}const C=await fetch(`${n}/votes`);s=C.ok?await C.json():[],p(c,{});for(const k of s)k.voteOption&&k.voteOption.id&&Lt(c,u(c)[k.voteOption.id]=(u(c)[k.voteOption.id]||0)+1)}catch(O){console.error(O),p(l,"Failed to load data: "+O.message)}finally{p(f,!1)}}async function h(O){if(p(l,""),!r()){p(l,"Create or choose a user first (use Create User).");return}if(!O){p(l,"Invalid option.");return}const y={user:{id:r()},voteOption:{id:O}};try{const C=await fetch(`${n}/votes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!C.ok)throw new Error(`Vote failed (status ${C.status})`);await _(),p(l,"Vote submitted!")}catch(C){console.error(C),p(l,"Error submitting vote: "+C.message)}}function d(O){try{return new Date(O).toLocaleString()}catch{return O||"—"}}async function v(O,y){try{if(!r()){p(l,"Create or choose a user first (use Create User).");return}const C=s.find(x=>x.user?.id==r()&&x.voteOption?.id==y);if(!C){p(l,"You haven't voted on this option yet.");return}if(!(await fetch(`${n}/votes/${C.id}`,{method:"DELETE"})).ok)throw new Error("Unvote failed");await _(),p(l,"Vote removed!")}catch(C){console.error("Error unvoting:",C),p(l,"Error unvoting: "+C.message)}}async function w(O){try{const y=u(a).find(k=>k.id===O);if(y&&y.creator&&y.creator.id!==r()){p(l,"You can only delete polls you created.");return}const C=await fetch(`${n}/polls/${O}`,{method:"DELETE"});if(!C.ok)throw new Error(`Delete failed (status ${C.status})`);await _(),p(l,"Poll deleted.")}catch(y){console.error("Error deleting poll:",y),p(l,"Error deleting poll: "+y.message)}}xt();var b=li(),I=A(P(b),2),m=P(I),E=A(I,2);{var R=O=>{var y=za();q(O,y)};re(E,O=>{u(f)&&O(R)})}var M=A(E,2);{var T=O=>{var y=ei(),C=P(y);ie(k=>{rn(y,1,`message ${k??""}`),ue(C,u(l))},[()=>(u(l),G(()=>u(l).startsWith("Error")||u(l).startsWith("Failed")?"message-error":"message-success"))]),q(O,y)};re(M,O=>{u(l)&&O(T)})}var D=A(M,2);{var Y=O=>{var y=ti();q(O,y)};re(D,O=>{u(f),u(a),G(()=>!u(f)&&u(a).length===0)&&O(Y)})}var z=A(D,2);ht(z,5,()=>u(a),pt,(O,y)=>{var C=si(),k=P(C),x=P(k),g=A(k,2);{var S=B=>{var ce=ri();X("click",ce,()=>w(u(y).id)),q(B,ce)};re(g,B=>{u(y),zr(r()),G(()=>u(y).creator&&u(y).creator.id===r())&&B(S)})}var L=A(g,2),W=P(L),ee=A(W);{var U=B=>{var ce=xa();ie(()=>ue(ce,`• Created by: ${u(y),G(()=>u(y).creator.username)??""}`)),q(B,ce)};re(ee,B=>{u(y),G(()=>u(y).creator&&u(y).creator.username)&&B(U)})}var oe=A(L,2);{var Ne=B=>{var ce=ai();ht(ce,5,()=>(u(o),u(y),G(()=>u(o)[u(y).id])),pt,(ln,De)=>{var Zt=ni(),zt=P(Zt),er=P(zt),on=P(er),un=A(er,2),fn=P(un),cn=A(zt,2),tr=P(cn),vn=A(tr,2);ie(()=>{ue(on,(u(De),G(()=>u(De).caption))),ue(fn,`${u(c),u(De),G(()=>u(c)[u(De).id]||0)??""} vote(s)`)}),X("click",tr,()=>h(u(De).id)),X("click",vn,()=>v(u(y).id,u(De).id)),q(ln,Zt)}),q(B,ce)},Ot=B=>{var ce=ii();q(B,ce)};re(oe,B=>{u(o),u(y),G(()=>u(o)[u(y).id]&&u(o)[u(y).id].length>0)?B(Ne):B(Ot,!1)})}ie(B=>{ue(x,(u(y),G(()=>u(y).question))),ue(W,`Valid until: ${B??""} `)},[()=>(u(y),G(()=>d(u(y).validUntil)))]),q(O,C)}),X("click",m,_),q(e,b),rt()}var ui=V('<p class="user-greeting"> </p> <button class="delete-btn">Delete User</button>',1),fi=V('<p class="user-greeting">First, choose or create a user</p>'),ci=V("<option> </option>"),vi=V('<div style="margin-top:8px;"><label for="userSelect" class="label">Switch User:</label> <select id="userSelect" class="input"><option disabled>Choose user</option><!></select></div>'),di=V('<main class="svelte-j60miq"><header class="app-header"><h1 class="app-title">Voting App</h1> <!> <!></header> <nav class="top-nav svelte-j60miq"><button class="nav-btn svelte-j60miq">Create User</button> <button class="nav-btn svelte-j60miq">Create Poll</button> <button class="nav-btn svelte-j60miq">Vote / View Polls</button></nav> <div class="container"><section class="card"><!></section></div></main>');function _i(e,t){tt(t,!1);const r="";let n=H([]);async function a(){try{const g=await fetch(`${r}/users`);p(n,g.ok?await g.json():[])}catch(g){console.error("Failed to load users:",g),p(n,[])}finally{}}an(async()=>{await a()});let i=H("vote"),s=H(0);const l=localStorage.getItem("userId"),f=localStorage.getItem("userName");let o=H(l&&f?{id:l,username:f}:null),c=H(u(o)?u(o).id:"");function _(g){p(i,"vote"),p(s,u(s)+1)}function h(g){const S=g.detail;if(!S||!S.id)return;localStorage.setItem("userId",S.id);const L=S.username??S.name??"";localStorage.setItem("userName",L),p(o,{id:S.id,username:L}),p(c,S.id),a(),p(i,"vote"),p(s,u(s)+1)}async function d(){if(u(o)){try{await fetch(`${r}/users/${u(o).id}`,{method:"DELETE"})}catch(g){console.warn("Backend user deletion failed (continuing client cleanup):",g)}localStorage.removeItem("userId"),localStorage.removeItem("userName"),p(o,null),p(c,""),await a()}}function v(g){const S=u(n).find(L=>L.id===g);S&&(p(o,{id:S.id,username:S.username??S.name??""}),p(c,u(o).id),localStorage.setItem("userId",u(o).id),localStorage.setItem("userName",u(o).username),p(s,u(s)+1))}xt();var w=di(),b=P(w),I=A(P(b),2);{var m=g=>{var S=ui(),L=or(S),W=P(L),ee=A(L,2);ie(()=>ue(W,`Hello, ${u(o).username??""}!`)),X("click",ee,d),q(g,S)},E=g=>{var S=fi();q(g,S)};re(I,g=>{u(o)&&u(o).username?g(m):g(E,!1)})}var R=A(I,2);{var M=g=>{var S=vi(),L=A(P(S),2);ie(()=>{u(c),_a(()=>{u(n)})});var W=P(L);W.value=W.__value="";var ee=A(W);ht(ee,1,()=>u(n),pt,(U,oe)=>{var Ne=ci(),Ot=P(Ne),B={};ie(()=>{ue(Ot,u(oe).username??u(oe).name??"(no name)"),B!==(B=u(oe).id)&&(Ne.value=(Ne.__value=u(oe).id)??"")}),q(U,Ne)}),ie(()=>Ma(W,u(c)==="")),$a(L,()=>u(c),U=>p(c,U)),X("change",L,U=>v(U.target.value)),q(g,S)};re(R,g=>{u(n).length>0&&g(M)})}var T=A(b,2),D=P(T),Y=A(D,2),z=A(Y,2),O=A(T,2),y=P(O),C=P(y);{var k=g=>{Ka(g,{$$events:{created:h}})},x=g=>{var S=Oa(),L=or(S);{var W=U=>{Za(U,{$$events:{created:_}})},ee=U=>{{let oe=yt(()=>u(o)?u(o).id:"");oi(U,{get key(){return u(s)},get currentUserId(){return u(oe)}})}};re(L,U=>{u(i)==="create"?U(W):U(ee,!1)},!0)}q(g,S)};re(C,g=>{u(i)==="user"?g(k):g(x,!1)})}ie(()=>{lt(D,"aria-pressed",u(i)==="user"),lt(Y,"aria-pressed",u(i)==="create"),lt(z,"aria-pressed",u(i)==="vote")}),X("click",D,()=>p(i,"user")),X("click",Y,()=>p(i,"create")),X("click",z,()=>p(i,"vote")),q(e,w),rt()}Aa(_i,{target:document.getElementById("app")});
