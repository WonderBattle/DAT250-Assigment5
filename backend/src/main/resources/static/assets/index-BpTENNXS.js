(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const mr=!1;var ze=Array.isArray,dn=Array.prototype.indexOf,Ft=Array.from,Nt=Object.defineProperty,Me=Object.getOwnPropertyDescriptor,gr=Object.getOwnPropertyDescriptors,_n=Object.prototype,pn=Array.prototype,qt=Object.getPrototypeOf,rr=Object.isExtensible;function hn(e){return e()}function ot(e){for(var t=0;t<e.length;t++)e[t]()}function mn(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}const ne=2,jt=4,mt=8,Be=16,ge=32,Ie=64,br=128,se=256,ut=512,J=1024,le=2048,ke=4096,fe=8192,Pe=16384,Vt=32768,Bt=65536,nr=1<<17,gn=1<<18,et=1<<19,yr=1<<20,Dt=1<<21,Ht=1<<22,Oe=1<<23,we=Symbol("$state"),bn=Symbol("legacy props"),yn=Symbol(""),Yt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function wn(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function wr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function En(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Sn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function On(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function An(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function In(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Pn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const gt=1,bt=2,Er=4,Cn=8,Nn=16,Dn=2,$n=4,Rn=8,Ln=1,Mn=2,K=Symbol(),Un="http://www.w3.org/1999/xhtml";function Fn(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let qn=!1;function Sr(e){return e===this.v}function jn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function kr(e){return!jn(e,this.v)}let He=!1,Vn=!1;function Bn(){He=!0}let j=null;function ft(e){j=e}function tt(e,t=!1,r){j={p:j,c:null,e:null,s:e,x:null,l:He&&!t?{s:null,u:null,$:[]}:null}}function rt(e){var t=j,r=t.e;if(r!==null){t.e=null;for(var n of r)jr(n)}return j=t.p,{}}function nt(){return!He||j!==null&&j.l===null}const Hn=new WeakMap;function Yn(e){var t=N;if(t===null)return $.f|=Oe,e;if((t.f&Vt)===0){if((t.f&br)===0)throw!t.parent&&e instanceof Error&&xr(e),e;t.b.error(e)}else Wt(e,t)}function Wt(e,t){for(;t!==null;){if((t.f&br)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&xr(e),e}function xr(e){const t=Hn.get(e);t&&(Nt(e,"message",{value:t.message}),Nt(e,"stack",{value:t.stack}))}let Je=[],$t=[];function Or(){var e=Je;Je=[],ot(e)}function Wn(){var e=$t;$t=[],ot(e)}function Tr(e){Je.length===0&&queueMicrotask(Or),Je.push(e)}function Kn(){Je.length>0&&Or(),$t.length>0&&Wn()}function Gn(){for(var e=N.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&wn(),e}function Kt(e){var t=ne|le,r=$!==null&&($.f&ne)!==0?$:null;return N===null||r!==null&&(r.f&se)!==0?t|=se:N.f|=et,{ctx:j,deps:null,effects:null,equals:Sr,f:t,fn:e,reactions:null,rv:0,v:K,wv:0,parent:r??N,ac:null}}function Jn(e,t){let r=N;r===null&&En();var n=r.b,i=void 0,a=Qe(K),s=null,o=!$;return ui(()=>{try{var f=e();s&&Promise.resolve(f).catch(()=>{})}catch(d){f=Promise.reject(d)}var u=()=>f;i=s?.then(u,u)??Promise.resolve(f),s=i;var c=F,p=n.pending;o&&(n.update_pending_count(1),p||c.increment());const h=(d,v=void 0)=>{s=null,p||c.activate(),v?v!==Yt&&(a.f|=Oe,Ve(a,v)):((a.f&Oe)!==0&&(a.f^=Oe),Ve(a,d)),o&&(n.update_pending_count(-1),p||c.decrement()),Pr()};if(i.then(h,d=>h(null,d||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(f=>{function u(c){function p(){c===i?f(a):u(i)}c.then(p,p)}u(i)})}function yt(e){const t=Kt(e);return t.equals=kr,t}function Ar(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)me(t[r])}}function Qn(e){for(var t=e.parent;t!==null;){if((t.f&ne)===0)return t;t=t.parent}return null}function Gt(e){var t,r=N;Se(Qn(e));try{Ar(e),t=Xr(e)}finally{Se(r)}return t}function Ir(e){var t=Gt(e);if(e.equals(t)||(e.v=t,e.wv=Jr()),!Ce){var r=(ye||(e.f&se)!==0)&&e.deps!==null?ke:J;Z(e,r)}}function Xn(e,t,r){const n=nt()?Kt:yt;if(t.length===0){r(e.map(n));return}var i=F,a=N,s=Zn(),o=Gn();Promise.all(t.map(f=>Jn(f))).then(f=>{i?.activate(),s();try{r([...e.map(n),...f])}catch(u){(a.f&Pe)===0&&Wt(u,a)}i?.deactivate(),Pr()}).catch(f=>{o.error(f)})}function Zn(){var e=N,t=$,r=j,n=F;return function(){Se(e),_e(t),ft(r),n?.activate()}}function Pr(){Se(null),_e(null),ft(null)}const Tt=new Set;let F=null,at=null,ir=new Set,ct=[];function Cr(){const e=ct.shift();ct.length>0&&queueMicrotask(Cr),e()}let Ae=[],wt=null,Rt=!1,st=!1;class qe{current=new Map;#o=new Map;#i=new Set;#e=0;#u=null;#f=!1;#r=[];#a=[];#n=[];#t=[];#s=[];#c=[];#v=[];skipped_effects=new Set;process(t){Ae=[],at=null;for(const i of t)this.#_(i);if(this.#r.length===0&&this.#e===0){this.#d();var r=this.#n,n=this.#t;this.#n=[],this.#t=[],this.#s=[],at=F,F=null,ar(r),ar(n),F===null?F=this:Tt.delete(this),this.#u?.resolve()}else this.#l(this.#n),this.#l(this.#t),this.#l(this.#s);for(const i of this.#r)Fe(i);for(const i of this.#a)Fe(i);this.#r=[],this.#a=[]}#_(t){t.f^=J;for(var r=t.first;r!==null;){var n=r.f,i=(n&(ge|Ie))!==0,a=i&&(n&J)!==0,s=a||(n&fe)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){if(i)r.f^=J;else if((n&jt)!==0)this.#t.push(r);else if((n&J)===0)if((n&Ht)!==0){var o=r.b?.pending?this.#a:this.#r;o.push(r)}else kt(r)&&((r.f&Be)!==0&&this.#s.push(r),Fe(r));var f=r.first;if(f!==null){r=f;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}}#l(t){for(const r of t)((r.f&le)!==0?this.#c:this.#v).push(r),Z(r,J);t.length=0}capture(t,r){this.#o.has(t)||this.#o.set(t,r),this.current.set(t,t.v)}activate(){F=this}deactivate(){F=null,at=null;for(const t of ir)if(ir.delete(t),t(),F!==null)break}neuter(){this.#f=!0}flush(){Ae.length>0?Nr():this.#d(),F===this&&(this.#e===0&&Tt.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#i)t();this.#i.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)Z(t,le),je(t);for(const t of this.#v)Z(t,ke),je(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#i.add(t)}settled(){return(this.#u??=mn()).promise}static ensure(){if(F===null){const t=F=new qe;Tt.add(F),st||qe.enqueue(()=>{F===t&&t.flush()})}return F}static enqueue(t){ct.length===0&&queueMicrotask(Cr),ct.unshift(t)}}function zn(e){var t=st;st=!0;try{for(var r;;){if(Kn(),Ae.length===0&&(F?.flush(),Ae.length===0))return wt=null,r;Nr()}}finally{st=t}}function Nr(){var e=Ue;Rt=!0;try{var t=0;for(fr(!0);Ae.length>0;){var r=qe.ensure();if(t++>1e3){var n,i;ei()}r.process(Ae),Ee.clear()}}finally{Rt=!1,fr(e),wt=null}}function ei(){try{On()}catch(e){Wt(e,wt)}}let xe=null;function ar(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Pe|fe))===0&&kt(n)&&(xe=[],Fe(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Yr(n):n.fn=null),xe?.length>0)){Ee.clear();for(const i of xe)Fe(i);xe=[]}}xe=null}}function je(e){for(var t=wt=e;t.parent!==null;){t=t.parent;var r=t.f;if(Rt&&t===N&&(r&Be)!==0)return;if((r&(Ie|ge))!==0){if((r&J)===0)return;t.f^=J}}Ae.push(t)}const Ee=new Map;function Qe(e,t){var r={f:0,v:e,reactions:null,equals:Sr,rv:0,wv:0};return r}function be(e,t){const r=Qe(e);return pi(r),r}function Y(e,t=!1,r=!0){const n=Qe(e);return t||(n.equals=kr),He&&r&&j!==null&&j.l!==null&&(j.l.s??=[]).push(n),n}function Lt(e,t){return _(e,G(()=>l(e))),t}function _(e,t,r=!1){$!==null&&(!de||($.f&nr)!==0)&&nt()&&($.f&(ne|Be|Ht|nr))!==0&&!he?.includes(e)&&Pn();let n=r?Le(t):t;return Ve(e,n)}function Ve(e,t){if(!e.equals(t)){var r=e.v;Ce?Ee.set(e,t):Ee.set(e,r),e.v=t;var n=qe.ensure();n.capture(e,r),(e.f&ne)!==0&&((e.f&le)!==0&&Gt(e),Z(e,(e.f&se)===0?J:ke)),e.wv=Jr(),Dr(e,le),nt()&&N!==null&&(N.f&J)!==0&&(N.f&(ge|Ie))===0&&(ie===null?hi([e]):ie.push(e))}return t}function At(e){_(e,e.v+1)}function Dr(e,t){var r=e.reactions;if(r!==null)for(var n=nt(),i=r.length,a=0;a<i;a++){var s=r[a],o=s.f;if(!(!n&&s===N)){var f=(o&le)===0;f&&Z(s,t),(o&ne)!==0?Dr(s,ke):f&&((o&Be)!==0&&xe!==null&&xe.push(s),je(s))}}}function Le(e){if(typeof e!="object"||e===null||we in e)return e;const t=qt(e);if(t!==_n&&t!==pn)return e;var r=new Map,n=ze(e),i=be(0),a=Te,s=o=>{if(Te===a)return o();var f=$,u=Te;_e(null),vr(a);var c=o();return _e(f),vr(u),c};return n&&r.set("length",be(e.length)),new Proxy(e,{defineProperty(o,f,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&An();var c=r.get(f);return c===void 0?c=s(()=>{var p=be(u.value);return r.set(f,p),p}):_(c,u.value,!0),!0},deleteProperty(o,f){var u=r.get(f);if(u===void 0){if(f in o){const c=s(()=>be(K));r.set(f,c),At(i)}}else _(u,K),At(i);return!0},get(o,f,u){if(f===we)return e;var c=r.get(f),p=f in o;if(c===void 0&&(!p||Me(o,f)?.writable)&&(c=s(()=>{var d=Le(p?o[f]:K),v=be(d);return v}),r.set(f,c)),c!==void 0){var h=l(c);return h===K?void 0:h}return Reflect.get(o,f,u)},getOwnPropertyDescriptor(o,f){var u=Reflect.getOwnPropertyDescriptor(o,f);if(u&&"value"in u){var c=r.get(f);c&&(u.value=l(c))}else if(u===void 0){var p=r.get(f),h=p?.v;if(p!==void 0&&h!==K)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(o,f){if(f===we)return!0;var u=r.get(f),c=u!==void 0&&u.v!==K||Reflect.has(o,f);if(u!==void 0||N!==null&&(!c||Me(o,f)?.writable)){u===void 0&&(u=s(()=>{var h=c?Le(o[f]):K,d=be(h);return d}),r.set(f,u));var p=l(u);if(p===K)return!1}return c},set(o,f,u,c){var p=r.get(f),h=f in o;if(n&&f==="length")for(var d=u;d<p.v;d+=1){var v=r.get(d+"");v!==void 0?_(v,K):d in o&&(v=s(()=>be(K)),r.set(d+"",v))}if(p===void 0)(!h||Me(o,f)?.writable)&&(p=s(()=>be(void 0)),_(p,Le(u)),r.set(f,p));else{h=p.v!==K;var w=s(()=>Le(u));_(p,w)}var b=Reflect.getOwnPropertyDescriptor(o,f);if(b?.set&&b.set.call(c,u),!h){if(n&&typeof f=="string"){var C=r.get("length"),m=Number(f);Number.isInteger(m)&&m>=C.v&&_(C,m+1)}At(i)}return!0},ownKeys(o){l(i);var f=Reflect.ownKeys(o).filter(p=>{var h=r.get(p);return h===void 0||h.v!==K});for(var[u,c]of r)c.v!==K&&!(u in o)&&f.push(u);return f},setPrototypeOf(){In()}})}function sr(e){try{if(e!==null&&typeof e=="object"&&we in e)return e[we]}catch{}return e}function ti(e,t){return Object.is(sr(e),sr(t))}var lr,$r,Rr,Lr;function ri(){if(lr===void 0){lr=window,$r=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Rr=Me(t,"firstChild").get,Lr=Me(t,"nextSibling").get,rr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),rr(r)&&(r.__t=void 0)}}function Ye(e=""){return document.createTextNode(e)}function vt(e){return Rr.call(e)}function Et(e){return Lr.call(e)}function I(e,t){return vt(e)}function or(e,t){{var r=vt(e);return r instanceof Comment&&r.data===""?Et(r):r}}function T(e,t=1,r=!1){let n=e;for(;t--;)n=Et(n);return n}function ni(e){e.textContent=""}function Mr(){return!1}let ur=!1;function ii(){ur||(ur=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function St(e){var t=$,r=N;_e(null),Se(null);try{return e()}finally{_e(t),Se(r)}}function Ur(e,t,r,n=r){e.addEventListener(t,()=>St(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),ii()}function Fr(e){N===null&&$===null&&xn(),$!==null&&($.f&se)!==0&&N===null&&kn(),Ce&&Sn()}function ai(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function pe(e,t,r,n=!0){var i=N;i!==null&&(i.f&fe)!==0&&(e|=fe);var a={ctx:j,deps:null,nodes_start:null,nodes_end:null,f:e|le,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Fe(a),a.f|=Vt}catch(f){throw me(a),f}else t!==null&&je(a);if(n){var s=a;if(r&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&et)===0&&(s=s.first),s!==null&&(s.parent=i,i!==null&&ai(s,i),$!==null&&($.f&ne)!==0&&(e&Ie)===0)){var o=$;(o.effects??=[]).push(s)}}return a}function qr(e){const t=pe(mt,null,!1);return Z(t,J),t.teardown=e,t}function Mt(e){Fr();var t=N.f,r=!$&&(t&ge)!==0&&(t&Vt)===0;if(r){var n=j;(n.e??=[]).push(e)}else return jr(e)}function jr(e){return pe(jt|yr,e,!1)}function si(e){return Fr(),pe(mt|yr,e,!0)}function li(e){qe.ensure();const t=pe(Ie|et,e,!0);return(r={})=>new Promise(n=>{r.outro?Jt(t,()=>{me(t),n(void 0)}):(me(t),n(void 0))})}function oi(e){return pe(jt,e,!1)}function ui(e){return pe(Ht|et,e,!0)}function fi(e,t=0){return pe(mt|t,e,!0)}function ae(e,t=[],r=[]){Xn(t,r,n=>{pe(mt,()=>e(...n.map(l)),!0)})}function Vr(e,t=0){var r=pe(Be|t,e,!0);return r}function Xe(e,t=!0){return pe(ge|et,e,!0,t)}function Br(e){var t=e.teardown;if(t!==null){const r=Ce,n=$;cr(!0),_e(null);try{t.call(null)}finally{cr(r),_e(n)}}}function Hr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&St(()=>{i.abort(Yt)});var n=r.next;(r.f&Ie)!==0?r.parent=null:me(r,t),r=n}}function ci(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&ge)===0&&me(t),t=r}}function me(e,t=!0){var r=!1;(t||(e.f&gn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(vi(e.nodes_start,e.nodes_end),r=!0),Hr(e,t&&!r),dt(e,0),Z(e,Pe);var n=e.transitions;if(n!==null)for(const a of n)a.stop();Br(e);var i=e.parent;i!==null&&i.first!==null&&Yr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function vi(e,t){for(;e!==null;){var r=e===t?null:Et(e);e.remove(),e=r}}function Yr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Jt(e,t){var r=[];Qt(e,r,!0),Wr(r,()=>{me(e),t&&t()})}function Wr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Qt(e,t,r){if((e.f&fe)===0){if(e.f^=fe,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&Bt)!==0||(n.f&ge)!==0;Qt(n,t,a?r:!1),n=i}}}function Xt(e){Kr(e,!0)}function Kr(e,t){if((e.f&fe)!==0){e.f^=fe,(e.f&J)===0&&(Z(e,le),je(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Bt)!==0||(r.f&ge)!==0;Kr(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Re=null;function di(e){var t=Re;try{if(Re=new Set,G(e),t!==null)for(var r of Re)t.add(r);return Re}finally{Re=t}}function _i(e){for(var t of di(e))Ve(t,t.v)}let Ue=!1;function fr(e){Ue=e}let Ce=!1;function cr(e){Ce=e}let $=null,de=!1;function _e(e){$=e}let N=null;function Se(e){N=e}let he=null;function pi(e){$!==null&&(he===null?he=[e]:he.push(e))}let Q=null,te=0,ie=null;function hi(e){ie=e}let Gr=1,Ze=0,Te=Ze;function vr(e){Te=e}let ye=!1;function Jr(){return++Gr}function kt(e){var t=e.f;if((t&le)!==0)return!0;if((t&ke)!==0){var r=e.deps,n=(t&se)!==0;if(r!==null){var i,a,s=(t&ut)!==0,o=n&&N!==null&&!ye,f=r.length;if((s||o)&&(N===null||(N.f&Pe)===0)){var u=e,c=u.parent;for(i=0;i<f;i++)a=r[i],(s||!a?.reactions?.includes(u))&&(a.reactions??=[]).push(u);s&&(u.f^=ut),o&&c!==null&&(c.f&se)===0&&(u.f^=se)}for(i=0;i<f;i++)if(a=r[i],kt(a)&&Ir(a),a.wv>e.wv)return!0}(!n||N!==null&&!ye)&&Z(e,J)}return!1}function Qr(e,t,r=!0){var n=e.reactions;if(n!==null&&!he?.includes(e))for(var i=0;i<n.length;i++){var a=n[i];(a.f&ne)!==0?Qr(a,t,!1):t===a&&(r?Z(a,le):(a.f&J)!==0&&Z(a,ke),je(a))}}function Xr(e){var t=Q,r=te,n=ie,i=$,a=ye,s=he,o=j,f=de,u=Te,c=e.f;Q=null,te=0,ie=null,ye=(c&se)!==0&&(de||!Ue||$===null),$=(c&(ge|Ie))===0?e:null,he=null,ft(e.ctx),de=!1,Te=++Ze,e.ac!==null&&(St(()=>{e.ac.abort(Yt)}),e.ac=null);try{e.f|=Dt;var p=e.fn,h=p(),d=e.deps;if(Q!==null){var v;if(dt(e,te),d!==null&&te>0)for(d.length=te+Q.length,v=0;v<Q.length;v++)d[te+v]=Q[v];else e.deps=d=Q;if(!ye||(c&ne)!==0&&e.reactions!==null)for(v=te;v<d.length;v++)(d[v].reactions??=[]).push(e)}else d!==null&&te<d.length&&(dt(e,te),d.length=te);if(nt()&&ie!==null&&!de&&d!==null&&(e.f&(ne|ke|le))===0)for(v=0;v<ie.length;v++)Qr(ie[v],e);return i!==null&&i!==e&&(Ze++,ie!==null&&(n===null?n=ie:n.push(...ie))),(e.f&Oe)!==0&&(e.f^=Oe),h}catch(w){return Yn(w)}finally{e.f^=Dt,Q=t,te=r,ie=n,$=i,ye=a,he=s,ft(o),de=f,Te=u}}function mi(e,t){let r=t.reactions;if(r!==null){var n=dn.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&ne)!==0&&(Q===null||!Q.includes(t))&&(Z(t,ke),(t.f&(se|ut))===0&&(t.f^=ut),Ar(t),dt(t,0))}function dt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)mi(e,r[n])}function Fe(e){var t=e.f;if((t&Pe)===0){Z(e,J);var r=N,n=Ue;N=e,Ue=!0;try{(t&Be)!==0?ci(e):Hr(e),Br(e);var i=Xr(e);e.teardown=typeof i=="function"?i:null,e.wv=Gr;var a;mr&&Vn&&(e.f&le)!==0&&e.deps}finally{Ue=n,N=r}}}async function gi(){await Promise.resolve(),zn()}function l(e){var t=e.f,r=(t&ne)!==0;if(Re?.add(e),$!==null&&!de){var n=N!==null&&(N.f&Pe)!==0;if(!n&&!he?.includes(e)){var i=$.deps;if(($.f&Dt)!==0)e.rv<Ze&&(e.rv=Ze,Q===null&&i!==null&&i[te]===e?te++:Q===null?Q=[e]:(!ye||!Q.includes(e))&&Q.push(e));else{($.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[$]:a.includes($)||a.push($)}}}else if(r&&e.deps===null&&e.effects===null){var s=e,o=s.parent;o!==null&&(o.f&se)===0&&(s.f^=se)}if(Ce){if(Ee.has(e))return Ee.get(e);if(r){s=e;var f=s.v;return((s.f&J)===0&&s.reactions!==null||Zr(s))&&(f=Gt(s)),Ee.set(s,f),f}}else r&&(s=e,kt(s)&&Ir(s));if((e.f&Oe)!==0)throw e.v;return e.v}function Zr(e){if(e.v===K)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ee.has(t)||(t.f&ne)!==0&&Zr(t))return!0;return!1}function G(e){var t=de;try{return de=!0,e()}finally{de=t}}const bi=-7169;function Z(e,t){e.f=e.f&bi|t}function zr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(we in e)Ut(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&we in r&&Ut(r)}}}function Ut(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Ut(e[n],t)}catch{}const r=qt(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=gr(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}const yi=["touchstart","touchmove"];function wi(e){return yi.includes(e)}const Ei=new Set,dr=new Set;function Si(e,t,r,n={}){function i(a){if(n.capture||We.call(t,a),!a.cancelBubble)return St(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Tr(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function X(e,t,r,n,i){var a={capture:n,passive:i},s=Si(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&qr(()=>{t.removeEventListener(e,s,a)})}let _r=null;function We(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;_r=e;var s=0,o=_r===e&&e.__root;if(o){var f=i.indexOf(o);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;f<=u&&(s=f)}if(a=i[s]||e.target,a!==t){Nt(e,"currentTarget",{configurable:!0,get(){return a||r}});var c=$,p=N;_e(null),Se(null);try{for(var h,d=[];a!==null;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var w=a["__"+n];if(w!=null&&(!a.disabled||e.target===a))if(ze(w)){var[b,...C]=w;b.apply(a,[e,...C])}else w.call(a,e)}catch(m){h?d.push(m):h=m}if(e.cancelBubble||v===t||v===null)break;a=v}if(h){for(let m of d)queueMicrotask(()=>{throw m});throw h}}finally{e.__root=t,delete e.currentTarget,_e(c),Se(p)}}}function ki(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function _t(e,t){var r=N;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function B(e,t){var r=(t&Ln)!==0,n=(t&Mn)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=ki(a?e:"<!>"+e),r||(i=vt(i)));var s=n||$r?document.importNode(i,!0):i.cloneNode(!0);if(r){var o=vt(s),f=s.lastChild;_t(o,f)}else _t(s,s);return s}}function xi(e=""){{var t=Ye(e+"");return _t(t,t),t}}function Oi(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ye();return e.append(t,r),_t(t,r),e}function q(e,t){e!==null&&e.before(t)}function ue(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Ti(e,t){return Ai(e,t)}const $e=new Map;function Ai(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:s=!0}){ri();var o=new Set,f=p=>{for(var h=0;h<p.length;h++){var d=p[h];if(!o.has(d)){o.add(d);var v=wi(d);t.addEventListener(d,We,{passive:v});var w=$e.get(d);w===void 0?(document.addEventListener(d,We,{passive:v}),$e.set(d,1)):$e.set(d,w+1)}}};f(Ft(Ei)),dr.add(f);var u=void 0,c=li(()=>{var p=r??t.appendChild(Ye());return Xe(()=>{if(a){tt({});var h=j;h.c=a}i&&(n.$$events=i),u=e(p,n)||{},a&&rt()}),()=>{for(var h of o){t.removeEventListener(h,We);var d=$e.get(h);--d===0?(document.removeEventListener(h,We),$e.delete(h)):$e.set(h,d)}dr.delete(f),p!==r&&p.parentNode?.removeChild(p)}});return Ii.set(u,c),u}let Ii=new WeakMap;function re(e,t,r=!1){var n=e,i=null,a=null,s=K,o=r?Bt:0,f=!1;const u=(d,v=!0)=>{f=!0,h(v,d)};var c=null;function p(){c!==null&&(c.lastChild.remove(),n.before(c),c=null);var d=s?i:a,v=s?a:i;d&&Xt(d),v&&Jt(v,()=>{s?a=null:i=null})}const h=(d,v)=>{if(s!==(s=d)){var w=Mr(),b=n;if(w&&(c=document.createDocumentFragment(),c.append(b=Ye())),s?i??=v&&Xe(()=>v(b)):a??=v&&Xe(()=>v(b)),w){var C=F,m=s?i:a,E=s?a:i;m&&C.skipped_effects.delete(m),E&&C.skipped_effects.add(E),C.add_callback(p)}else p()}};Vr(()=>{f=!1,t(u),f||h(null,null)},o)}function pt(e,t){return t}function Pi(e,t,r){for(var n=e.items,i=[],a=t.length,s=0;s<a;s++)Qt(t[s].e,i,!0);var o=a>0&&i.length===0&&r!==null;if(o){var f=r.parentNode;ni(f),f.append(r),n.clear(),ve(e,t[0].prev,t[a-1].next)}Wr(i,()=>{for(var u=0;u<a;u++){var c=t[u];o||(n.delete(c.k),ve(e,c.prev,c.next)),me(c.e,!o)}})}function ht(e,t,r,n,i,a=null){var s=e,o={flags:t,items:new Map,first:null},f=(t&Er)!==0;if(f){var u=e;s=u.appendChild(Ye())}var c=null,p=!1,h=new Map,d=yt(()=>{var C=r();return ze(C)?C:C==null?[]:Ft(C)}),v,w;function b(){Ci(w,v,o,h,s,i,t,n,r),a!==null&&(v.length===0?c?Xt(c):c=Xe(()=>a(s)):c!==null&&Jt(c,()=>{c=null}))}Vr(()=>{w??=N,v=l(d);var C=v.length;if(!(p&&C===0)){p=C===0;var m,E,L,M;if(Mr()){var A=new Set,D=F;for(E=0;E<C;E+=1){L=v[E],M=n(L,E);var W=o.items.get(M)??h.get(M);W?(t&(gt|bt))!==0&&en(W,L,E,t):(m=tn(null,o,null,null,L,M,E,i,t,r,!0),h.set(M,m)),A.add(M)}for(const[z,O]of o.items)A.has(z)||D.skipped_effects.add(O.e);D.add_callback(b)}else b();l(d)}})}function Ci(e,t,r,n,i,a,s,o,f){var u=(s&Cn)!==0,c=(s&(gt|bt))!==0,p=t.length,h=r.items,d=r.first,v=d,w,b=null,C,m=[],E=[],L,M,A,D;if(u)for(D=0;D<p;D+=1)L=t[D],M=o(L,D),A=h.get(M),A!==void 0&&(A.a?.measure(),(C??=new Set).add(A));for(D=0;D<p;D+=1){if(L=t[D],M=o(L,D),A=h.get(M),A===void 0){var W=n.get(M);if(W!==void 0){n.delete(M),h.set(M,W);var z=b?b.next:v;ve(r,b,W),ve(r,W,z),It(W,z,i),b=W}else{var O=v?v.e.nodes_start:i;b=tn(O,r,b,b===null?r.first:b.next,L,M,D,a,s,f)}h.set(M,b),m=[],E=[],v=b.next;continue}if(c&&en(A,L,D,s),(A.e.f&fe)!==0&&(Xt(A.e),u&&(A.a?.unfix(),(C??=new Set).delete(A))),A!==v){if(w!==void 0&&w.has(A)){if(m.length<E.length){var y=E[0],P;b=y.prev;var k=m[0],x=m[m.length-1];for(P=0;P<m.length;P+=1)It(m[P],y,i);for(P=0;P<E.length;P+=1)w.delete(E[P]);ve(r,k.prev,x.next),ve(r,b,k),ve(r,x,y),v=y,b=x,D-=1,m=[],E=[]}else w.delete(A),It(A,v,i),ve(r,A.prev,A.next),ve(r,A,b===null?r.first:b.next),ve(r,b,A),b=A;continue}for(m=[],E=[];v!==null&&v.k!==M;)(v.e.f&fe)===0&&(w??=new Set).add(v),E.push(v),v=v.next;if(v===null)continue;A=v}m.push(A),b=A,v=A.next}if(v!==null||w!==void 0){for(var g=w===void 0?[]:Ft(w);v!==null;)(v.e.f&fe)===0&&g.push(v),v=v.next;var S=g.length;if(S>0){var R=(s&Er)!==0&&p===0?i:null;if(u){for(D=0;D<S;D+=1)g[D].a?.measure();for(D=0;D<S;D+=1)g[D].a?.fix()}Pi(r,g,R)}}u&&Tr(()=>{if(C!==void 0)for(A of C)A.a?.apply()}),e.first=r.first&&r.first.e,e.last=b&&b.e;for(var V of n.values())me(V.e);n.clear()}function en(e,t,r,n){(n&gt)!==0&&Ve(e.v,t),(n&bt)!==0?Ve(e.i,r):e.i=r}function tn(e,t,r,n,i,a,s,o,f,u,c){var p=(f&gt)!==0,h=(f&Nn)===0,d=p?h?Y(i,!1,!1):Qe(i):i,v=(f&bt)===0?s:Qe(s),w={i:v,v:d,k:a,a:null,e:null,prev:r,next:n};try{if(e===null){var b=document.createDocumentFragment();b.append(e=Ye())}return w.e=Xe(()=>o(e,d,v,u),qn),w.e.prev=r&&r.e,w.e.next=n&&n.e,r===null?c||(t.first=w):(r.next=w,r.e.next=w.e),n!==null&&(n.prev=w,n.e.prev=w.e),w}finally{}}function It(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==n;){var s=Et(a);i.before(a),a=s}}function ve(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ni(e,t,r){var n=e==null?"":""+e;return n===""?null:n}function rn(e,t,r,n,i,a){var s=e.__className;if(s!==r||s===void 0){var o=Ni(r);o==null?e.removeAttribute("class"):e.className=o,e.__className=r}return a}function nn(e,t,r=!1){if(e.multiple){if(t==null)return;if(!ze(t))return Fn();for(var n of e.options)n.selected=t.includes(Ke(n));return}for(n of e.options){var i=Ke(n);if(ti(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Di(e){var t=new MutationObserver(()=>{nn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qr(()=>{t.disconnect()})}function $i(e,t,r=t){var n=!0;Ur(e,"change",i=>{var a=i?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(a),Ke);else{var o=e.querySelector(a)??e.querySelector("option:not([disabled])");s=o&&Ke(o)}r(s)}),oi(()=>{var i=t();if(nn(e,i,n),n&&i===void 0){var a=e.querySelector(":checked");a!==null&&(i=Ke(a),r(i))}e.__value=i,n=!1}),Di(e)}function Ke(e){return"__value"in e?e.__value:e.value}const Ri=Symbol("is custom element"),Li=Symbol("is html");function Mi(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function lt(e,t,r,n){var i=Ui(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[yn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Fi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ui(e){return e.__attributes??={[Ri]:e.nodeName.includes("-"),[Li]:e.namespaceURI===Un}}var pr=new Map;function Fi(e){var t=e.getAttribute("is")||e.nodeName,r=pr.get(t);if(r)return r;pr.set(t,r=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=gr(i);for(var s in n)n[s].set&&r.push(s);i=qt(i)}return r}function Ge(e,t,r=t){var n=new WeakSet;Ur(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=Pt(e)?Ct(a):a,r(a),F!==null&&n.add(F),await gi(),a!==(a=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),G(t)==null&&e.value&&(r(Pt(e)?Ct(e.value):e.value),F!==null&&n.add(F)),fi(()=>{var i=t();if(e===document.activeElement){var a=at??F;if(n.has(a))return}Pt(e)&&i===Ct(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Pt(e){var t=e.type;return t==="number"||t==="range"}function Ct(e){return e===""?null:+e}function xt(e=!1){const t=j,r=t.l.u;if(!r)return;let n=()=>zr(t.s);if(e){let i=0,a={};const s=Kt(()=>{let o=!1;const f=t.s;for(const u in f)f[u]!==a[u]&&(a[u]=f[u],o=!0);return o&&i++,i});n=()=>l(s)}r.b.length&&si(()=>{hr(t,n),ot(r.b)}),Mt(()=>{const i=G(()=>r.m.map(hn));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Mt(()=>{hr(t,n),ot(r.a)})}function hr(e,t){if(e.l.s)for(const r of e.l.s)l(r);t()}let it=!1;function qi(e){var t=it;try{return it=!1,[e(),it]}finally{it=t}}function ji(e,t,r,n){var i=!He||(r&Dn)!==0,a=(r&Rn)!==0,s=n,o=!0,f=()=>(o&&(o=!1,s=n),s),u;{var c=we in e||bn in e;u=Me(e,t)?.set??(c&&t in e?m=>e[t]=m:void 0)}var p,h=!1;[p,h]=qi(()=>e[t]),p===void 0&&n!==void 0&&(p=f(),u&&(i&&Tn(),u(p)));var d;if(i?d=()=>{var m=e[t];return m===void 0?f():(o=!0,m)}:d=()=>{var m=e[t];return m!==void 0&&(s=void 0),m===void 0?s:m},i&&(r&$n)===0)return d;if(u){var v=e.$$legacy;return(function(m,E){return arguments.length>0?((!i||!E||v||h)&&u(E?d():m),m):d()})}var w=!1,b=yt(()=>(w=!1,d()));l(b);var C=N;return(function(m,E){if(arguments.length>0){const L=E?l(b):i&&a?Le(m):m;return _(b,L),w=!0,s!==void 0&&(s=L),m}return Ce&&w||(C.f&Pe)!==0?b.v:l(b)})}function an(e){j===null&&wr(),He&&j.l!==null?Bi(j).m.push(e):Mt(()=>{const t=G(e);if(typeof t=="function")return t})}function Vi(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function sn(){const e=j;return e===null&&wr(),(t,r,n)=>{const i=e.s.$$events?.[t];if(i){const a=ze(i)?i.slice():[i],s=Vi(t,r,n);for(const o of a)o.call(e.x,s);return!s.defaultPrevented}return!0}}function Bi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Hi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Hi);Bn();var Yi=B('<div class="message svelte-179l40m"> </div>'),Wi=B('<section><h2>Create User</h2> <div class="form svelte-179l40m"><div><label for="username" class="label">Username</label> <input id="username" class="input" type="text" placeholder="alice"/></div> <div><label for="email" class="label">Email (optional)</label> <input id="email" class="input" type="email" placeholder="alice@example.com"/></div> <div><button class="btn btn-primary">Create user</button></div></div> <!></section>');function Ki(e,t){tt(t,!1);const r=sn(),n="";let i=Y(""),a=Y(""),s=Y("");async function o(){_(s,"");const m={username:l(i),email:l(a)};try{const E=await fetch(`${n}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!E.ok){_(s,`Failed to create user (status ${E.status})`);return}const L=await E.json();localStorage.setItem("userId",L.id),localStorage.setItem("userName",L.username),r("created",L),_(s,`User created: ${L.username} (id ${L.id}). Saved to localStorage.`),_(i,""),_(a,"")}catch(E){_(s,"Error creating user: "+E.message)}}xt();var f=Wi(),u=T(I(f),2),c=I(u),p=T(I(c),2),h=T(c,2),d=T(I(h),2),v=T(h,2),w=I(v),b=T(u,2);{var C=m=>{var E=Yi(),L=I(E);ae(()=>ue(L,l(s))),q(m,E)};re(b,m=>{l(s)&&m(C)})}Ge(p,()=>l(i),m=>_(i,m)),Ge(d,()=>l(a),m=>_(a,m)),X("click",w,o),q(e,f),rt()}var Gi=B('<button class="icon-btn" title="Remove option">×</button>'),Ji=B('<div class="option-item"><input class="input" type="text"/> <!></div>'),Qi=B("<div> </div>"),Xi=B(`<section class="card"><h2>Create New Poll</h2> <div class="form"><div><label class="label">Question *</label> <input class="input" type="text" placeholder="What's your question?"/></div> <div><label class="label">Valid until (optional)</label> <input class="input" type="date"/> <div class="help-text">Leave empty to set 7 days from now automatically.</div></div> <div><label class="label">Options *</label> <div class="form" style="gap:10px;"></div> <div class="mt-12"><button class="btn btn-secondary">+ Add option</button></div></div> <div class="mt-16"><button class="btn btn-primary btn-block"> </button></div> <!></div></section>`);function Zi(e,t){tt(t,!1);const r=sn(),n="";let i=Y(""),a=Y(""),s=Y(["",""]),o=Y(""),f=Y(!1),u=localStorage.getItem("userId");function c(){_(s,[...l(s),""])}function p(k){l(s).length>2&&_(s,l(s).filter((x,g)=>g!==k))}function h(k,x){_(s,l(s).map((g,S)=>S===k?x:g))}async function d(){if(_(o,""),!u){_(o,"You must create a user first (use Create User).");return}if(!l(i).trim()||l(s).filter(x=>x.trim()).length<2){_(o,"Provide a question and at least 2 options.");return}_(f,!0);const k={question:l(i).trim(),publishedAt:new Date().toISOString(),validUntil:l(a)?new Date(l(a)).toISOString():new Date(Date.now()+168*3600*1e3).toISOString(),creator:{id:u},voteOptions:l(s).map(x=>x.trim()).filter(x=>x.length>0).map((x,g)=>({caption:x,presentationOrder:g+1}))};try{const x=await fetch(`${n}/polls`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!x.ok)throw new Error(`Create poll failed: ${x.status}`);const g=await x.json(),S=[];for(const R of k.voteOptions){const V={caption:R.caption,presentationOrder:R.presentationOrder,poll:{id:g.id}},ee=await fetch(`${n}/voteoptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!ee.ok){console.warn("Failed to create voteoption:",V,ee.status);continue}const U=await ee.json();S.push(U)}_(o,`Poll created (id: ${g.id}). ${g.voteOptions.length} option(s) registered.`),_(i,""),_(a,""),_(s,["",""]),r("created",g)}catch(x){console.error(x),_(o,"Error creating poll: "+x.message)}finally{_(f,!1)}}xt();var v=Xi(),w=T(I(v),2),b=I(w),C=T(I(b),2),m=T(b,2),E=T(I(m),2),L=T(m,2),M=T(I(L),2);ht(M,5,()=>l(s),pt,(k,x,g)=>{var S=Ji(),R=I(S);lt(R,"placeholder",`Option ${g+1}`);var V=T(R,2);{var ee=U=>{var oe=Gi();X("click",oe,()=>p(g)),q(U,oe)};re(V,U=>{l(s).length>2&&U(ee)})}Ge(R,()=>l(s)[g],U=>Lt(s,l(s)[g]=U)),X("input",R,U=>h(g,U.target.value)),q(k,S)});var A=T(M,2),D=I(A),W=T(L,2),z=I(W),O=I(z),y=T(W,2);{var P=k=>{var x=Qi(),g=I(x);ae(S=>{rn(x,1,`message ${S??""}`),ue(g,l(o))},[()=>l(o).startsWith("Error")?"message-error":"message-success"]),q(k,x)};re(y,k=>{l(o)&&k(P)})}ae(()=>{z.disabled=l(f),ue(O,l(f)?"Creating...":"Create Poll")}),Ge(C,()=>l(i),k=>_(i,k)),Ge(E,()=>l(a),k=>_(a,k)),X("click",D,c),X("click",z,d),q(e,v),rt()}var zi=B('<div class="message">Loading…</div>'),ea=B("<div> </div>"),ta=B('<div class="message">No polls available.</div>'),ra=B('<button class="delete-btn">Delete Poll</button>'),na=B('<li class="option-item"><div><strong> </strong> <span class="count-badge"> </span></div> <div class="option-actions"><button class="btn btn-primary">Vote</button> <button class="unvote-btn">Unvote</button></div></li>'),ia=B('<ul class="options-list"></ul>'),aa=B('<div class="help-text">No vote options registered for this poll yet.</div>'),sa=B('<article class="poll-card"><h3 style="margin: 0 0 6px 0;"> </h3> <!> <div class="meta"> <!></div> <!></article>'),la=B('<section class="card"><h2>Available Polls</h2> <div class="mt-12 mb-12" style="display:flex; gap:10px; align-items:center;"><button class="btn btn-secondary">Refresh</button> <span class="help-text">Tip: Create a user first, then create a poll and vote.</span></div> <!> <!> <!> <div class="polls-grid"></div></section>');function oa(e,t){tt(t,!1);let r=ji(t,"currentUserId",8,"");const n="";let i=Y([]),a=[],s=[],o=Y(""),f=Y(!1),u=Y({}),c=Y({});an(async()=>{await p()});async function p(){_(f,!0),_(o,"");try{const O=await fetch(`${n}/polls`);_(i,O.ok?await O.json():[]);const y=await fetch(`${n}/voteoptions`);a=y.ok?await y.json():[],_(u,{});for(const k of a){const x=k.poll&&k.poll.id?k.poll.id:null;x&&(l(u)[x]||Lt(u,l(u)[x]=[]),l(u)[x].push(k))}const P=await fetch(`${n}/votes`);s=P.ok?await P.json():[],_(c,{});for(const k of s)k.voteOption&&k.voteOption.id&&Lt(c,l(c)[k.voteOption.id]=(l(c)[k.voteOption.id]||0)+1)}catch(O){console.error(O),_(o,"Failed to load data: "+O.message)}finally{_(f,!1)}}async function h(O){if(_(o,""),!r()){_(o,"Create or choose a user first (use Create User).");return}if(!O){_(o,"Invalid option.");return}const y={user:{id:r()},voteOption:{id:O}};try{const P=await fetch(`${n}/votes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!P.ok)throw new Error(`Vote failed (status ${P.status})`);await p(),_(o,"Vote submitted!")}catch(P){console.error(P),_(o,"Error submitting vote: "+P.message)}}function d(O){try{return new Date(O).toLocaleString()}catch{return O||"—"}}async function v(O,y){try{if(!r()){_(o,"Create or choose a user first (use Create User).");return}const P=s.find(x=>x.user?.id==r()&&x.voteOption?.id==y);if(!P){_(o,"You haven't voted on this option yet.");return}if(!(await fetch(`${n}/votes/${P.id}`,{method:"DELETE"})).ok)throw new Error("Unvote failed");await p(),_(o,"Vote removed!")}catch(P){console.error("Error unvoting:",P),_(o,"Error unvoting: "+P.message)}}async function w(O){try{const y=l(i).find(k=>k.id===O);if(y&&y.creator&&y.creator.id!==r()){_(o,"You can only delete polls you created.");return}const P=await fetch(`${n}/polls/${O}`,{method:"DELETE"});if(!P.ok)throw new Error(`Delete failed (status ${P.status})`);await p(),_(o,"Poll deleted.")}catch(y){console.error("Error deleting poll:",y),_(o,"Error deleting poll: "+y.message)}}xt();var b=la(),C=T(I(b),2),m=I(C),E=T(C,2);{var L=O=>{var y=zi();q(O,y)};re(E,O=>{l(f)&&O(L)})}var M=T(E,2);{var A=O=>{var y=ea(),P=I(y);ae(k=>{rn(y,1,`message ${k??""}`),ue(P,l(o))},[()=>(l(o),G(()=>l(o).startsWith("Error")||l(o).startsWith("Failed")?"message-error":"message-success"))]),q(O,y)};re(M,O=>{l(o)&&O(A)})}var D=T(M,2);{var W=O=>{var y=ta();q(O,y)};re(D,O=>{l(f),l(i),G(()=>!l(f)&&l(i).length===0)&&O(W)})}var z=T(D,2);ht(z,5,()=>l(i),pt,(O,y)=>{var P=sa(),k=I(P),x=I(k),g=T(k,2);{var S=H=>{var ce=ra();X("click",ce,()=>w(l(y).id)),q(H,ce)};re(g,H=>{l(y),zr(r()),G(()=>l(y).creator&&l(y).creator.id===r())&&H(S)})}var R=T(g,2),V=I(R),ee=T(V);{var U=H=>{var ce=xi();ae(()=>ue(ce,`• Created by: ${l(y),G(()=>l(y).creator.username)??""}`)),q(H,ce)};re(ee,H=>{l(y),G(()=>l(y).creator&&l(y).creator.username)&&H(U)})}var oe=T(R,2);{var Ne=H=>{var ce=ia();ht(ce,5,()=>(l(u),l(y),G(()=>l(u)[l(y).id])),pt,(ln,De)=>{var Zt=na(),zt=I(Zt),er=I(zt),on=I(er),un=T(er,2),fn=I(un),cn=T(zt,2),tr=I(cn),vn=T(tr,2);ae(()=>{ue(on,(l(De),G(()=>l(De).caption))),ue(fn,`${l(c),l(De),G(()=>l(c)[l(De).id]||0)??""} vote(s)`)}),X("click",tr,()=>h(l(De).id)),X("click",vn,()=>v(l(y).id,l(De).id)),q(ln,Zt)}),q(H,ce)},Ot=H=>{var ce=aa();q(H,ce)};re(oe,H=>{l(u),l(y),G(()=>l(u)[l(y).id]&&l(u)[l(y).id].length>0)?H(Ne):H(Ot,!1)})}ae(H=>{ue(x,(l(y),G(()=>l(y).question))),ue(V,`Valid until: ${H??""} `)},[()=>(l(y),G(()=>d(l(y).validUntil)))]),q(O,P)}),X("click",m,p),q(e,b),rt()}var ua=B('<p class="user-greeting"> </p> <button class="delete-btn">Delete User</button>',1),fa=B('<p class="user-greeting">First, choose or create a user</p>'),ca=B("<option> </option>"),va=B('<div style="margin-top:8px;"><label for="userSelect" class="label">Switch User:</label> <select id="userSelect" class="input"><option disabled>Choose user</option><!></select></div>'),da=B('<main class="svelte-j60miq"><header class="app-header"><h1 class="app-title">Voting App</h1> <!> <!></header> <nav class="top-nav svelte-j60miq"><button class="nav-btn svelte-j60miq">Create User</button> <button class="nav-btn svelte-j60miq">Create Poll</button> <button class="nav-btn svelte-j60miq">Vote / View Polls</button></nav> <div class="container"><section class="card"><!></section></div></main>');function _a(e,t){tt(t,!1);const r="";let n=Y([]);async function i(){try{const g=await fetch(`${r}/users`);_(n,g.ok?await g.json():[])}catch(g){console.error("Failed to load users:",g),_(n,[])}finally{}}an(async()=>{await i()});let a=Y("vote"),s=Y(0);const o=localStorage.getItem("userId"),f=localStorage.getItem("userName");let u=Y(o&&f?{id:Number(o),username:f}:null),c=Y(l(u)?l(u).id:null);function p(g){_(a,"vote"),_(s,l(s)+1)}function h(g){const S=g.detail;if(!S||!S.id)return;localStorage.setItem("userId",S.id);const R=S.username??S.name??"";localStorage.setItem("userName",R),_(u,{id:Number(S.id),username:R}),_(c,Number(S.id)),i(),_(a,"vote"),_(s,l(s)+1)}async function d(){if(!l(u))return;const g=l(u).id;try{await fetch(`${r}/users/${l(u).id}`,{method:"DELETE"})}catch(S){console.warn("Backend user deletion failed (continuing client cleanup):",S)}localStorage.removeItem("userId"),localStorage.removeItem("userName"),_(n,l(n).filter(S=>S.id!==g)),_(u,null),_(c,""),await i(),_(s,l(s)+1)}function v(g){const S=Number(g),R=l(n).find(V=>V.id===S);R&&(_(c,S),_(u,{id:R.id,username:R.username??R.name??""}),localStorage.setItem("userId",String(R.id)),localStorage.setItem("userName",l(u).username),_(s,l(s)+1))}xt();var w=da(),b=I(w),C=T(I(b),2);{var m=g=>{var S=ua(),R=or(S),V=I(R),ee=T(R,2);ae(()=>ue(V,`Hello, ${l(u).username??""}!`)),X("click",ee,d),q(g,S)},E=g=>{var S=fa();q(g,S)};re(C,g=>{l(u)&&l(u).username?g(m):g(E,!1)})}var L=T(C,2);{var M=g=>{var S=va(),R=T(I(S),2);ae(()=>{l(c),_i(()=>{l(n)})});var V=I(R);V.value=V.__value="";var ee=T(V);ht(ee,1,()=>l(n),pt,(U,oe)=>{var Ne=ca(),Ot=I(Ne),H={};ae(()=>{ue(Ot,l(oe).username??l(oe).name??"(no name)"),H!==(H=l(oe).id)&&(Ne.value=(Ne.__value=l(oe).id)??"")}),q(U,Ne)}),ae(()=>Mi(V,l(c)==="")),$i(R,()=>l(c),U=>_(c,U)),X("change",R,U=>v(U.target.value)),q(g,S)};re(L,g=>{l(n).length>0&&g(M)})}var A=T(b,2),D=I(A),W=T(D,2),z=T(W,2),O=T(A,2),y=I(O),P=I(y);{var k=g=>{Ki(g,{$$events:{created:h}})},x=g=>{var S=Oi(),R=or(S);{var V=U=>{Zi(U,{$$events:{created:p}})},ee=U=>{{let oe=yt(()=>l(u)?l(u).id:"");oa(U,{get key(){return l(s)},get currentUserId(){return l(oe)}})}};re(R,U=>{l(a)==="create"?U(V):U(ee,!1)},!0)}q(g,S)};re(P,g=>{l(a)==="user"?g(k):g(x,!1)})}ae(()=>{lt(D,"aria-pressed",l(a)==="user"),lt(W,"aria-pressed",l(a)==="create"),lt(z,"aria-pressed",l(a)==="vote")}),X("click",D,()=>_(a,"user")),X("click",W,()=>_(a,"create")),X("click",z,()=>_(a,"vote")),q(e,w),rt()}Ti(_a,{target:document.getElementById("app")});
